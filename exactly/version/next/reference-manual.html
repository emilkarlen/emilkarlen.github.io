<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><title>Reference Manual for Exactly</title><style>pre {
  background-color : #EEFFCC;
  padding: 7px;
  border: 1px solid #cEdFaC;
}

.console {
  background-color : #D8D8D8;
  border: 1px solid #C8C8C8;
}

.syntax-text {
  font-family: monospace;
}


.enum-constant {
  font-weight: bold;
}


.header-text {
  font-weight: bold;
}


section.toc > header > h1 {
  padding: 5px;
  border-bottom: thick solid black;
}

section.toc > header > h2 {
  padding: 2px;
  border-bottom: medium solid black;
}

section.toc > header > h3 {
  padding: 2px;
  border-bottom: thin solid black;
}


article > header > h1 {
  padding: 3px;
  font-size: x-large;
  background-color: #c0c0c0;
}

article > header > p {
  font-style: italic;
  font-size: 110%;
}

article section > header > h1 {
    font-size: large;
}

article section > header > h2 {
    font-size: medium;
}

article.section > header > h1 {
  font-size: xx-large;
  background-color: LightGoldenRodYellow;
}


table {
  border-collapse: collapse;
}

th {
  font-weight: normal;
  background-color: #f4f4f4;
  text-align: left;
  padding-right: 5px;
  vertical-align: top;
}

td {
  vertical-align: top;
}


a:link {
  text-decoration: none;
}


a:hover {
  text-decoration: underline;
}

</style></head><body><div style="font-size: 250%;
font-weight: bold;
">Reference Manual for Exactly</div><p>Exactly version 0.13.0</p><hr><div style="font-size: 200%;
font-weight: bold;
">Table of Contents</div><ul><li><a href="#custom.test-case">Test Cases</a><ul><li><a href="#help-part.TEST_CASE_SPEC">Specification of test case functionality</a><ul><li><a href="#custom.test-case.spec.introduction">Introduction</a></li><li><a href="#custom.test-case.spec.structure">Structure</a><ul><li><a href="#custom.test-case.spec.structure.phases">Phases</a></li><li><a href="#custom.test-case.spec.structure.act">The "act" phase, "action to check" and "actors"</a></li><li><a href="#custom.test-case.spec.structure.instructions">Instructions</a></li><li><a href="#custom.test-case.spec.structure.suites">Relation to test suites</a><ul><li><a href="#custom.test-case.spec.structure.suites.suite-contents">Inclusion of phase contents from suites</a></li><li><a href="#custom.test-case.spec.structure.suites.part-of-suite">Part of suite</a></li></ul></li></ul></li><li><a href="#custom.test-case.spec.exe-env">Execution environment</a><ul><li><a href="#custom.test-case.spec.exe-env.dir-structure">Directory structure and Current directory</a><ul><li><a href="#custom.test-case.spec.exe-env.dir-structure.sds">Sandbox directory structure and Current directory</a></li><li><a href="#custom.test-case.spec.exe-env.dir-structure.hds">Home directory structure</a></li><li><a href="#custom.test-case.spec.exe-env.dir-structure.file-ref">File references</a></li></ul></li><li><a href="#custom.test-case.spec.exe-env.symbols">Symbols</a></li><li><a href="#custom.test-case.spec.exe-env.os-proc">OS process environment</a><ul><li><a href="#custom.test-case.spec.exe-env.os-proc.cd">Current directory</a></li><li><a href="#custom.test-case.spec.exe-env.os-proc.env-vars">Environment variables</a></li><li><a href="#custom.test-case.spec.exe-env.os-proc.timeout">Timeout</a></li></ul></li></ul></li><li><a href="#custom.test-case.spec.file-syntax">File syntax</a><ul><li><a href="#custom.test-case.spec.file-syntax.phases">Phases</a></li><li><a href="#custom.test-case.spec.file-syntax.phase-contents">Phase contents</a></li><li><a href="#custom.test-case.spec.file-syntax.instructions">Instructions</a><ul><li><a href="#custom.test-case.spec.file-syntax.instructions.description">Instruction descriptions</a></li></ul></li><li><a href="#custom.test-case.spec.file-syntax.file-inclusion">File inclusion</a></li><li><a href="#custom.test-case.spec.file-syntax.com-empty">Comments and empty lines</a></li></ul></li><li><a href="#custom.test-case.spec.processing">Processing steps</a></li><li><a href="#custom.test-case.spec.outcome">Outcome</a><ul><li><a href="#custom.test-case.spec.outcome.reporting">Reporting</a></li><li><a href="#custom.test-case.spec.outcome.scenarios">Scenarios</a><ul><li><a href="#custom.test-case.spec.outcome.scenarios.complete-execution">Complete execution</a></li><li><a href="#custom.test-case.spec.outcome.scenarios.error-during-validation">Error during validation</a></li><li><a href="#custom.test-case.spec.outcome.scenarios.error-during-execution">Error during execution</a></li><li><a href="#custom.test-case.spec.outcome.scenarios.other-errors">Other errors</a></li></ul></li><li><a href="#custom.test-case.spec.outcome.summary-of-exit-codes">Summary of exit codes and identifiers</a></li></ul></li></ul></li><li><a href="#custom.test-case.phases">Phases</a><ul><li><a href="#test-case.phase.conf"><span class="syntax-text">[conf]</span></a></li><li><a href="#test-case.phase.setup"><span class="syntax-text">[setup]</span></a></li><li><a href="#test-case.phase.act"><span class="syntax-text">[act]</span></a></li><li><a href="#test-case.phase.before-assert"><span class="syntax-text">[before-assert]</span></a></li><li><a href="#test-case.phase.assert"><span class="syntax-text">[assert]</span></a></li><li><a href="#test-case.phase.cleanup"><span class="syntax-text">[cleanup]</span></a></li></ul></li><li><a href="#custom.test-case.directives">Directives</a><ul><li><a href="#entity.directive.including"><span class="syntax-text">including</span></a></li></ul></li><li><a href="#custom.test-case.instructions">Instructions per phase</a><ul><li><a href="#custom.test-case.instructions.conf"><span class="syntax-text">[conf]</span></a><ul><li><a href="#test-case.instruction.conf.act-home"><span class="syntax-text">act-home</span></a></li><li><a href="#test-case.instruction.conf.actor"><span class="syntax-text">actor</span></a></li><li><a href="#test-case.instruction.conf.home"><span class="syntax-text">home</span></a></li><li><a href="#test-case.instruction.conf.status"><span class="syntax-text">status</span></a></li><li><a href="#test-case.instruction.conf.timeout"><span class="syntax-text">timeout</span></a></li></ul></li><li><a href="#custom.test-case.instructions.setup"><span class="syntax-text">[setup]</span></a><ul><li><a href="#test-case.instruction.setup.$"><span class="syntax-text">$</span></a></li><li><a href="#test-case.instruction.setup.%"><span class="syntax-text">%</span></a></li><li><a href="#test-case.instruction.setup.cd"><span class="syntax-text">cd</span></a></li><li><a href="#test-case.instruction.setup.copy"><span class="syntax-text">copy</span></a></li><li><a href="#test-case.instruction.setup.def"><span class="syntax-text">def</span></a></li><li><a href="#test-case.instruction.setup.dir"><span class="syntax-text">dir</span></a></li><li><a href="#test-case.instruction.setup.env"><span class="syntax-text">env</span></a></li><li><a href="#test-case.instruction.setup.file"><span class="syntax-text">file</span></a></li><li><a href="#test-case.instruction.setup.run"><span class="syntax-text">run</span></a></li><li><a href="#test-case.instruction.setup.stdin"><span class="syntax-text">stdin</span></a></li></ul></li><li><a href="#custom.test-case.instructions.before-assert"><span class="syntax-text">[before-assert]</span></a><ul><li><a href="#test-case.instruction.before-assert.$"><span class="syntax-text">$</span></a></li><li><a href="#test-case.instruction.before-assert.%"><span class="syntax-text">%</span></a></li><li><a href="#test-case.instruction.before-assert.cd"><span class="syntax-text">cd</span></a></li><li><a href="#test-case.instruction.before-assert.copy"><span class="syntax-text">copy</span></a></li><li><a href="#test-case.instruction.before-assert.def"><span class="syntax-text">def</span></a></li><li><a href="#test-case.instruction.before-assert.dir"><span class="syntax-text">dir</span></a></li><li><a href="#test-case.instruction.before-assert.env"><span class="syntax-text">env</span></a></li><li><a href="#test-case.instruction.before-assert.file"><span class="syntax-text">file</span></a></li><li><a href="#test-case.instruction.before-assert.run"><span class="syntax-text">run</span></a></li></ul></li><li><a href="#custom.test-case.instructions.assert"><span class="syntax-text">[assert]</span></a><ul><li><a href="#custom.test-case.instructions.assert.assertion">Assertions</a><ul><li><a href="#test-case.instruction.assert.contents"><span class="syntax-text">contents</span></a></li><li><a href="#test-case.instruction.assert.dir-contents"><span class="syntax-text">dir-contents</span></a></li><li><a href="#test-case.instruction.assert.exists"><span class="syntax-text">exists</span></a></li><li><a href="#test-case.instruction.assert.exit-code"><span class="syntax-text">exit-code</span></a></li><li><a href="#test-case.instruction.assert.stderr"><span class="syntax-text">stderr</span></a></li><li><a href="#test-case.instruction.assert.stdout"><span class="syntax-text">stdout</span></a></li></ul></li><li><a href="#custom.test-case.instructions.assert.both">Assertions and helpers</a><ul><li><a href="#test-case.instruction.assert.$"><span class="syntax-text">$</span></a></li><li><a href="#test-case.instruction.assert.%"><span class="syntax-text">%</span></a></li><li><a href="#test-case.instruction.assert.run"><span class="syntax-text">run</span></a></li></ul></li><li><a href="#custom.test-case.instructions.assert.helper">Helpers</a><ul><li><a href="#test-case.instruction.assert.cd"><span class="syntax-text">cd</span></a></li><li><a href="#test-case.instruction.assert.copy"><span class="syntax-text">copy</span></a></li><li><a href="#test-case.instruction.assert.def"><span class="syntax-text">def</span></a></li><li><a href="#test-case.instruction.assert.dir"><span class="syntax-text">dir</span></a></li><li><a href="#test-case.instruction.assert.env"><span class="syntax-text">env</span></a></li><li><a href="#test-case.instruction.assert.file"><span class="syntax-text">file</span></a></li></ul></li></ul></li><li><a href="#custom.test-case.instructions.cleanup"><span class="syntax-text">[cleanup]</span></a><ul><li><a href="#test-case.instruction.cleanup.$"><span class="syntax-text">$</span></a></li><li><a href="#test-case.instruction.cleanup.%"><span class="syntax-text">%</span></a></li><li><a href="#test-case.instruction.cleanup.cd"><span class="syntax-text">cd</span></a></li><li><a href="#test-case.instruction.cleanup.copy"><span class="syntax-text">copy</span></a></li><li><a href="#test-case.instruction.cleanup.def"><span class="syntax-text">def</span></a></li><li><a href="#test-case.instruction.cleanup.dir"><span class="syntax-text">dir</span></a></li><li><a href="#test-case.instruction.cleanup.env"><span class="syntax-text">env</span></a></li><li><a href="#test-case.instruction.cleanup.file"><span class="syntax-text">file</span></a></li><li><a href="#test-case.instruction.cleanup.run"><span class="syntax-text">run</span></a></li></ul></li></ul></li></ul></li><li><a href="#custom.test-suite">Test Suites</a><ul><li><a href="#help-part.TEST_SUITE_SPEC">Specification of test suite functionality</a><ul><li><a href="#custom.test-suite.spec.introduction">Introduction</a></li><li><a href="#custom.test-suite.spec.structure">Structure</a><ul><li><a href="#custom.test-suite.spec.structure.cases-and-sub-suites">Test cases and sub suites</a></li><li><a href="#custom.test-suite.spec.structure.common-test-case-contents">Common test case contents</a></li><li><a href="#custom.test-suite.spec.structure.additional-test-case-conf">Additional test case configuration</a></li></ul></li><li><a href="#custom.test-suite.spec.file-syntax">File syntax</a></li><li><a href="#custom.test-suite.spec.outcome">Outcome</a><ul><li><a href="#custom.test-suite.spec.outcome.reporting">Reporting</a></li><li><a href="#custom.test-suite.spec.outcome.scenarios">Scenarios</a></li></ul></li></ul></li><li><a href="#custom.test-suite.sections">Sections</a><ul><li><a href="#custom.test-suite.sections.cases-and-sub-suites">Test cases and sub suites</a><ul><li><a href="#test-suite.section.cases"><span class="syntax-text">[cases]</span></a></li><li><a href="#test-suite.section.suites"><span class="syntax-text">[suites]</span></a></li></ul></li><li><a href="#custom.test-suite.sections.common-case-contents">Common test case contents and configuration</a><ul><li><a href="#test-suite.section.conf"><span class="syntax-text">[conf]</span></a></li><li><a href="#test-suite.section.setup"><span class="syntax-text">[setup]</span></a></li><li><a href="#test-suite.section.act"><span class="syntax-text">[act]</span></a></li><li><a href="#test-suite.section.before-assert"><span class="syntax-text">[before-assert]</span></a></li><li><a href="#test-suite.section.assert"><span class="syntax-text">[assert]</span></a></li><li><a href="#test-suite.section.cleanup"><span class="syntax-text">[cleanup]</span></a></li></ul></li></ul></li><li><a href="#custom.test-suite.reporters">Suite reporters</a><ul><li><a href="#entity.reporter.junit"><span class="syntax-text">junit</span></a></li><li><a href="#entity.reporter.progress"><span class="syntax-text">progress</span></a></li></ul></li><li><a href="#custom.test-suite.instructions">Instructions per section</a><ul><li><a href="#custom.test-suite.instructions.conf"><span class="syntax-text">[conf]</span></a><ul><li><a href="#test-suite.instruction.conf.preprocessor"><span class="syntax-text">preprocessor</span></a></li></ul></li></ul></li></ul></li><li><a href="#custom.concept">Concepts</a><ul><li><a href="#entity.concept.action-to-check">action to check</a></li><li><a href="#entity.concept.actor">actor</a></li><li><a href="#entity.concept.configuration-parameter">configuration parameter</a></li><li><a href="#entity.concept.current-directory">current directory</a></li><li><a href="#entity.concept.directive">directive</a></li><li><a href="#entity.concept.environment-variable">environment variable</a></li><li><a href="#entity.concept.home-directory-structure">home directory structure</a></li><li><a href="#entity.concept.instruction">instruction</a></li><li><a href="#entity.concept.preprocessor">preprocessor</a></li><li><a href="#entity.concept.sandbox-directory-structure">sandbox directory structure</a></li><li><a href="#entity.concept.shell-syntax">shell syntax</a></li><li><a href="#entity.concept.suite-reporter">suite reporter</a></li><li><a href="#entity.concept.symbol">symbol</a></li><li><a href="#entity.concept.test-case-directory-structure">test case directory structure</a></li><li><a href="#entity.concept.type">type</a></li></ul></li><li><a href="#custom.confparam">Configuration parameters</a><ul><li><a href="#entity.confparam.act-home"><span class="syntax-text">act-home</span></a></li><li><a href="#entity.confparam.actor"><span class="syntax-text">actor</span></a></li><li><a href="#entity.confparam.home"><span class="syntax-text">home</span></a></li><li><a href="#entity.confparam.status"><span class="syntax-text">status</span></a></li><li><a href="#entity.confparam.timeout"><span class="syntax-text">timeout</span></a></li></ul></li><li><a href="#custom.actor">Actors</a><ul><li><a href="#entity.actor.command-line">command line</a></li><li><a href="#entity.actor.file-interpreter">file interpreter</a></li><li><a href="#entity.actor.null">null</a></li><li><a href="#entity.actor.source-interpreter">source interpreter</a></li></ul></li><li><a href="#custom.type">Types</a><ul><li><a href="#custom.type.data-type">Data types</a><ul><li><a href="#entity.type.list">list</a></li><li><a href="#entity.type.path">path</a></li><li><a href="#entity.type.string">string</a></li></ul></li><li><a href="#custom.type.logic-type">Logic types</a><ul><li><a href="#entity.type.file-matcher">file-matcher</a></li><li><a href="#entity.type.files-condition">files-condition</a></li><li><a href="#entity.type.files-matcher">files-matcher</a></li><li><a href="#entity.type.integer-matcher">integer-matcher</a></li><li><a href="#entity.type.line-matcher">line-matcher</a></li><li><a href="#entity.type.program">program</a></li><li><a href="#entity.type.string-matcher">string-matcher</a></li><li><a href="#entity.type.string-transformer">string-transformer</a></li></ul></li></ul></li><li><a href="#custom.syntax">Syntax elements</a><ul><li><a href="#custom.syntax.data-type">Data types</a><ul><li><a href="#entity.syntax.LIST"><span class="syntax-text">LIST</span></a></li><li><a href="#entity.syntax.PATH"><span class="syntax-text">PATH</span></a></li><li><a href="#entity.syntax.STRING"><span class="syntax-text">STRING</span></a></li></ul></li><li><a href="#custom.syntax.logic-type">Logic types</a><ul><li><a href="#entity.syntax.FILE-MATCHER"><span class="syntax-text">FILE-MATCHER</span></a></li><li><a href="#entity.syntax.FILES-CONDITION"><span class="syntax-text">FILES-CONDITION</span></a></li><li><a href="#entity.syntax.FILES-MATCHER"><span class="syntax-text">FILES-MATCHER</span></a></li><li><a href="#entity.syntax.INTEGER-MATCHER"><span class="syntax-text">INTEGER-MATCHER</span></a></li><li><a href="#entity.syntax.LINE-MATCHER"><span class="syntax-text">LINE-MATCHER</span></a></li><li><a href="#entity.syntax.PROGRAM"><span class="syntax-text">PROGRAM</span></a></li><li><a href="#entity.syntax.STRING-MATCHER"><span class="syntax-text">STRING-MATCHER</span></a></li><li><a href="#entity.syntax.STRING-TRANSFORMER"><span class="syntax-text">STRING-TRANSFORMER</span></a></li></ul></li><li><a href="#custom.syntax.other">Other</a><ul><li><a href="#entity.syntax.ACT-INTERPRETER"><span class="syntax-text">ACT-INTERPRETER</span></a></li><li><a href="#entity.syntax.GLOB-PATTERN"><span class="syntax-text">GLOB-PATTERN</span></a></li><li><a href="#entity.syntax.HERE-DOCUMENT"><span class="syntax-text">HERE-DOCUMENT</span></a></li><li><a href="#entity.syntax.INTEGER"><span class="syntax-text">INTEGER</span></a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT"><span class="syntax-text">PROGRAM-ARGUMENT</span></a></li><li><a href="#entity.syntax.REGEX"><span class="syntax-text">REGEX</span></a></li><li><a href="#entity.syntax.SHELL-COMMAND-LINE"><span class="syntax-text">SHELL-COMMAND-LINE</span></a></li><li><a href="#entity.syntax.STRING-SOURCE"><span class="syntax-text">STRING-SOURCE</span></a></li><li><a href="#entity.syntax.SYMBOL-NAME"><span class="syntax-text">SYMBOL-NAME</span></a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE"><span class="syntax-text">SYMBOL-REFERENCE</span></a></li></ul></li></ul></li><li><a href="#custom.builtin">Builtin symbols</a><ul><li><a href="#custom.builtin.valuetype.string">String symbols</a><ul><li><a href="#entity.builtin.NEW_LINE"><span class="syntax-text">NEW_LINE</span></a></li><li><a href="#entity.builtin.OS_LINE_SEP"><span class="syntax-text">OS_LINE_SEP</span></a></li><li><a href="#entity.builtin.TAB"><span class="syntax-text">TAB</span></a></li></ul></li><li><a href="#custom.builtin.valuetype.path">Path symbols</a><ul><li><a href="#entity.builtin.EXACTLY_ACT"><span class="syntax-text">EXACTLY_ACT</span></a></li><li><a href="#entity.builtin.EXACTLY_ACT_HOME"><span class="syntax-text">EXACTLY_ACT_HOME</span></a></li><li><a href="#entity.builtin.EXACTLY_HOME"><span class="syntax-text">EXACTLY_HOME</span></a></li><li><a href="#entity.builtin.EXACTLY_RESULT"><span class="syntax-text">EXACTLY_RESULT</span></a></li><li><a href="#entity.builtin.EXACTLY_TMP"><span class="syntax-text">EXACTLY_TMP</span></a></li></ul></li></ul></li><li><a href="#custom.cli-syntax">Command line syntax</a><ul><li><a href="#help-part.TEST_CASE_CLI">Test Cases</a></li><li><a href="#help-part.TEST_SUITE_CLI">Test Suites</a></li><li><a href="#help-part.SYMBOL_CLI">Symbol Inspection</a></li><li><a href="#custom.cli-syntax.help">Help System</a></li></ul></li></ul><section class="toc" id="custom.test-case"><header><h1>Test Cases</h1></header><section class="toc" id="help-part.TEST_CASE_SPEC"><header><h2>Specification of test case functionality</h2></header><section class="toc" id="custom.test-case.spec.introduction"><header><h3>Introduction</h3></header><p>A test case is written as a plain text file:</p><pre>[act]

helloworld

[assert]

exit-code == 0

stdout equals &lt;&lt;EOF
Hello, World!
EOF
</pre><p>If the file "helloworld.case" contains this test case, then Exactly can execute it:</p><pre class="console">&gt; exactly helloworld.case
PASS
</pre><p>"PASS" means that Exactly was able to execute the "helloworld" program, and that all assertions were satisfied.</p><p>It also means that the executable "helloworld" file was found in in the same directory as the test case file.</p><section><header><h4>File structure</h4></header><p>[act] marks the beginning of the "act" phase.</p><p>The "act" phase contains the "action to check" - the thing that is tested by the test case.</p><p>It must consist of a single command line, starting with the name of an executable file (by default).<br>The file must be located in the same directory as the test case file (by default).</p><p>[assert] marks the beginning of the "assert" phase.</p><p>The "assert" phase contains assertions, such as "exit-code" and "stdout".</p><p>The assertions determines the outcome of the test case.<br>Each assertion either PASS or FAIL. If any assertion FAIL, then the outcome of the test case as a whole is FAIL. Otherwise it is PASS.</p></section></section><section class="toc" id="custom.test-case.spec.structure"><header><h3>Structure</h3></header><section class="toc" id="custom.test-case.spec.structure.phases"><header><h4>Phases</h4></header><p>A test case is a sequence of "phases".<br>Executing a test case means executing all of its phases.</p><p>All phases are optional.</p><p>The phases are (in order of execution):</p><dl><dt><a href="#test-case.phase.conf"><span class="syntax-text">[conf]</span></a></dt><dd><p>Configures the execution of the remaining phases by setting "configuration parameters".</p></dd><dt><a href="#test-case.phase.setup"><span class="syntax-text">[setup]</span></a></dt><dd><p>Sets up the environment that the "action to check"
(the "act" phase) is executed in.
</p></dd><dt><a href="#test-case.phase.act"><span class="syntax-text">[act]</span></a></dt><dd><p>Contains the action to check; executes it and stores the outcome for later inspection.
</p><p>This is the default phase.</p></dd><dt><a href="#test-case.phase.before-assert"><span class="syntax-text">[before-assert]</span></a></dt><dd><p>Prepares for the "assert" phase.
</p></dd><dt><a href="#test-case.phase.assert"><span class="syntax-text">[assert]</span></a></dt><dd><p>Assertions on the outcome of the "action to check" (the "act" phase) that determine
the outcome of the test case.
</p></dd><dt><a href="#test-case.phase.cleanup"><span class="syntax-text">[cleanup]</span></a></dt><dd><p>Cleans up pollution from earlier phases that exist outside of the sandbox
(e.g. in a database).
</p></dd></dl></section><section class="toc" id="custom.test-case.spec.structure.act"><header><h4>The "act" phase, "action to check" and "actors"</h4></header><p>The contents of the "act" phase represents an "action to check" (ATC), and executing the "act" phase means executing this as an OS process.</p><p>The "actor" concept makes it possible to have different kind of ATCs. E.g. executable program files, source code files and shell commands.</p><p>The actor reads the contents of the "act" phase, and thereby resolves the ATC.</p><p>A test case configures which actor to use.</p><p>The special "null" actor specifies a no-operations ATC. It is used if the test case does not contain an "act" phase.</p><section><header><h5>Examples</h5></header><p>An ATC that is a Python source file, executed with arguments:</p><pre>[conf]

actor = file % python

[act]

my-python-program.py argument1 "second argument"
</pre><p>An ATC that is a shell command line:</p><pre>[act]

$ echo 'This is a' shell command line &gt; &amp;2
</pre></section><section><header><h5>See also</h5></header><ul><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#entity.concept.action-to-check">Concept "action to check"</a></li><li><a href="#entity.concept.actor">Concept "actor"</a></li></ul></section></section><section class="toc" id="custom.test-case.spec.structure.instructions"><header><h4>Instructions</h4></header><p>All phases except [act] is a sequence of instructions, zero or more.</p><p>Executing a phase with instructions means executing all of its instructions, in the order they appear in the test case.</p><p>Instructions in different phases serve different purposes.</p><p>For example, the instruction set of the [assert] phase contains instructions that serve as assertions.</p><section><header><h5>See also</h5></header><ul><li><a href="#entity.concept.instruction">Concept "instruction"</a></li></ul></section></section><section class="toc" id="custom.test-case.spec.structure.suites"><header><h4>Relation to test suites</h4></header><section class="toc" id="custom.test-case.spec.structure.suites.suite-contents"><header><h5>Inclusion of phase contents from suites</h5></header><p>A test suite can contain test case contents.<br>When a test case is run as part of a suite, this contents is included in the case.</p></section><section class="toc" id="custom.test-case.spec.structure.suites.part-of-suite"><header><h5>Part of suite</h5></header><p>A test case is considered part of a suite, depending on how it is run.</p><p>When run in the following ways, it is part of a suite:</p><ul><li>Standalone<ul><li>A suite file is given via command line arguments</li><li>A file "exactly.suite" exits in the same directory as the test case file<p>The file "exactly.suite" must be a test suite.</p><p>Note that the test case need not be listed in "exactly.suite".</p></li></ul></li><li>Via test suite<p>The test case file is listed in the suite.</p></li></ul></section><section><header><h5>See also</h5></header><ul><li><a href="#help-part.TEST_SUITE_SPEC">Specification of test suite functionality</a></li><li><a href="#help-part.TEST_CASE_CLI">Test case CLI</a></li></ul></section></section></section><section class="toc" id="custom.test-case.spec.exe-env"><header><h3>Execution environment</h3></header><section class="toc" id="custom.test-case.spec.exe-env.dir-structure"><header><h4>Directory structure and Current directory</h4></header><p>Files and directories used by tests are organized in the "test case directory structure" (TCDS).<br>It consists of two parts:</p><ul><li>Sandbox directory structure (SDS)<p>A set of temporary directories used by a single execution of a test case. one of them is the initial "current directory".</p></li><li>Home directory structure (HDS)<p>A set of persistent directories for files used by every execution of a test case.</p></li></ul><section class="toc" id="custom.test-case.spec.exe-env.dir-structure.sds"><header><h5>Sandbox directory structure and Current directory</h5></header><p>The SDS is created in a platform dependent location for temporary files.</p><p>The current directory is set to one of the directories inside the SDS at the beginning of execution.<br>This means that files and directories created in the current directory will be removed at the end of the execution.</p><p>The current directory is the same for all phases, unless changed by the "cd" instruction.<br>A change of "current directory" stay in effect for all following instructions and phases.</p></section><section class="toc" id="custom.test-case.spec.exe-env.dir-structure.hds"><header><h5>Home directory structure</h5></header><p>The HDS organizes files that exist before the execution and that should probably not be modified.</p><p>One of the directories in the HDS is the "act-home" directory. It is the location of the executable program file that is tested - i.e. the location of files referenced from the "act" phase.</p><p>All directories in the HDS are initialized to the directory that contains the test case file. They can be changed by the "conf" phase.</p></section><section class="toc" id="custom.test-case.spec.exe-env.dir-structure.file-ref"><header><h5>File references</h5></header><p>Exactly has functionality for referencing files in the TCDS using the "path" type.</p><p>The "path" data type has syntax for expressing paths relative to any of the TCDS directories.</p><p>The directory that a "path" value is relative to is called the "relativity" of the value.</p><p>Arguments to instructions that are paths use the "path" data type.<br>Each argument have different accepted "relativities" and different default "relativity".<br>The defaults are chosen to be the most likely "relativity". The accepted "relativities" are chosen to prevent modification of files in the HDS.</p></section><section><header><h5>See also</h5></header><ul><li><a href="#entity.concept.test-case-directory-structure">Concept "test case directory structure"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.concept.home-directory-structure">Concept "home directory structure"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.type.path">Type "path"</a></li><li><a href="#test-case.phase.conf">Phase [conf]</a></li></ul></section></section><section class="toc" id="custom.test-case.spec.exe-env.symbols"><header><h4>Symbols</h4></header><p>A "symbol" is a named constant defined by the "def" instruction.</p><p>Once defined, it is available to all following instructions in the phase where it is defined, and in all following phases.</p><p>Symbols may be used to define reusable values used by instructions and the "act" phase.</p><section><header><h5>See also</h5></header><ul><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#test-case.instruction.setup.def">Instruction "def" (in phase [setup])</a></li></ul></section></section><section class="toc" id="custom.test-case.spec.exe-env.os-proc"><header><h4>OS process environment</h4></header><p>Exactly executes OS processes as part of a test case. Part of their environment is controlled by Exactly.</p><section class="toc" id="custom.test-case.spec.exe-env.os-proc.cd"><header><h5>Current directory</h5></header><p>The current directory (PWD) is the same as for instructions.</p><p>It is changed by the "cd" instruction.</p></section><section class="toc" id="custom.test-case.spec.exe-env.os-proc.env-vars"><header><h5>Environment variables</h5></header><p>All OS environment variables that are set when Exactly is started are available in OS processes run from the test case.</p><p>Environment variables can be manipulated by the "env" instruction.</p></section><section class="toc" id="custom.test-case.spec.exe-env.os-proc.timeout"><header><h5>Timeout</h5></header><p>Timeout for all OS processes is determined by the "configuration parameter" "timeout".</p></section><section><header><h5>See also</h5></header><ul><li><a href="#entity.concept.test-case-directory-structure">Concept "test case directory structure"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.concept.environment-variable">Concept "environment variable"</a></li><li><a href="#entity.confparam.timeout">Configuration parameter "timeout"</a></li></ul></section></section></section><section class="toc" id="custom.test-case.spec.file-syntax"><header><h3>File syntax</h3></header><p>Syntax is line oriented.</p><p>Top level elements start at the beginning of a line, and line ends mark the end of elements, although some may span several lines (e.g. expressions inside parentheses).</p><section class="toc" id="custom.test-case.spec.file-syntax.phases"><header><h4>Phases</h4></header><p>"[NAME]" on a single line declares the start of phase NAME.<br>This line marks the start the "assert" phase, for example:</p><pre>[assert]
</pre><p>The following lines will belong to this phase.</p><p>File contents before the first phase declaration belong to the default phase, which is [act].</p><p>The order of the different phases in the test case file is irrelevant. The phases are always executed in the same order, regardless of the order they appear in the test case file.</p><p>A phase can be declared more than once.<br>Contents of multiple declarations are merged, and executed in the order it appears in the file.<br>Here, "exit-code" is executed before "stderr":</p><pre>[assert]

exit-code == 0

[act]

helloworld

[assert]

stderr empty
</pre></section><section class="toc" id="custom.test-case.spec.file-syntax.phase-contents"><header><h4>Phase contents</h4></header><p>All phases except the "act" phase consist of a sequence of "instructions" (see below).</p><p>The contents of the "act" phase depends on which "actor" is used.<br>By default, it is expected to contain a single command line.</p></section><section class="toc" id="custom.test-case.spec.file-syntax.instructions"><header><h4>Instructions</h4></header><p>Instructions start at the beginning of the line with a space separated identifier that is the name of the instruction.</p><p>The name may optionally be followed by arguments. Most instructions use a syntax for options, arguments and quoting that resembles the unix shell. The order of options is relevant, though (unlike many unix tools).<br>The exact syntax depends on the particular instruction.</p><p>An instruction may span several lines, as this form of "stdout" does:</p><pre>stdout equals &lt;&lt;EOF
Hello, World!
EOF
</pre><section class="toc" id="custom.test-case.spec.file-syntax.instructions.description"><header><h5>Instruction descriptions</h5></header><p>An instruction may optionally be preceded by a "description" - a free text within quotes that is displayed together with the instruction source line in error messages.<br>The purpose of a description is to describe the meaning of the instruction using text that is easier to understand than the source line.<br>A description is a quoted string using shell syntax.</p><p>For example, a free text may be easier to understand than a shell command:</p><pre>[assert]

'PATH should contain /usr/local/bin'

$ tr ':' '\n' &lt; ../result/stdout | grep '^/usr/local/bin$'
</pre><p>A description may span several lines.</p></section></section><section class="toc" id="custom.test-case.spec.file-syntax.file-inclusion"><header><h4>File inclusion</h4></header><p>Parts of a test case can be put in an external file, using the "including" directive:</p><pre>including external-part-of-test-case.xly
</pre><section><header><h5>See also</h5></header><ul><li><a href="#entity.concept.directive">Concept "directive"</a></li><li><a href="#entity.directive.including">Directive "including"</a></li></ul></section></section><section class="toc" id="custom.test-case.spec.file-syntax.com-empty"><header><h4>Comments and empty lines</h4></header><p>Lines beginning with "#" are comments.<br>Comments may only appear on lines between instructions and phase headers.</p><p>Empty lines that are not part of an instruction are ignored.</p><p>Empty lines, and lines with comment line syntax, may be part of instructions and the "act" phase, though, as in the "stdout" instruction here:</p><pre>stdout equals &lt;&lt;EOF
this assertion expects 4 lines of output
# this is the second line of the expected output

the empty line above is part of the expected output
EOF
</pre></section></section><section class="toc" id="custom.test-case.spec.processing"><header><h3>Processing steps</h3></header><p>Test case file "processing" starts after the command line arguments have been parsed, and Exactly has been told to run a test case.</p><p>A test case file is processed in a number of steps, where the actual execution of the test is the last step.</p><p>The outcome is reported by an exit code and an exit identifier printed as a single line on stdout.</p><ol><li>Preprocessing<p>Transforms the test case file.</p><p>This step is applied only if a preprocessor has been given by "--preprocessor", or set in a test suite.</p><p>Fails if the preprocessor program cannot be executed, 
or if it exits with a non-zero exit code.
</p><table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">PRE_PROCESS_ERROR</span></td></tr></table></li><li>Syntax checking and directives processing<p>Checks the syntax of all elements in the test case file, except for the [act] phase.</p><p>Processes directives ("including").</p><p>Fails if a syntax error is found, or if a directive fails.</p><ul><li>Syntax error<table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">SYNTAX_ERROR</span></td></tr></table></li><li>File inclusion error<table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">FILE_ACCESS_ERROR</span></td></tr></table></li></ul></li><li>Validation and syntax checking of [act]<p>Checks references to symbols and external resources (files),<br>and syntax of the [act] phase (according to the configured actor).</p><p>Fails if a reference to a symbol that has not been defined or has invalid type, is found, or if a reference to a non-existing file is found, e.g.</p><ul><li>Invalid syntax of [act]<table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">SYNTAX_ERROR</span></td></tr></table></li><li>Invalid reference to symbol or external resource<table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">VALIDATION_ERROR</span></td></tr></table></li></ul></li><li>Execution<p>Executes the actual test.</p><p>Executes the phases in the predefined order.</p><p>Executing a phase with instructions means executing all instructions in the order they appear in the test case file.</p><p>Execution halts if an instruction encounters an error, or, in the case of assertion instructions, if the assertion fails.</p></li></ol><section><header><h4>See also</h4></header><ul><li><a href="#entity.concept.preprocessor">Concept "preprocessor"</a></li><li><a href="#entity.concept.directive">Concept "directive"</a></li><li><a href="#entity.concept.instruction">Concept "instruction"</a></li><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li></ul></section></section><section class="toc" id="custom.test-case.spec.outcome"><header><h3>Outcome</h3></header><section class="toc" id="custom.test-case.spec.outcome.reporting"><header><h4>Reporting</h4></header><p>Outcome is reported either as an exit code, or as an exit code together with an exit identifier printed as a single line on stdout.</p></section><section class="toc" id="custom.test-case.spec.outcome.scenarios"><header><h4>Scenarios</h4></header><section class="toc" id="custom.test-case.spec.outcome.scenarios.complete-execution"><header><h5>Complete execution</h5></header><p>The outcome of a completely executed test case depends on two things:</p><ol><li>The "test case status" set by the "conf" phase.
<p>The default is PASS.</p></li><li>The outcome of the "assert" phase.
</li></ol><p>Together, these determine the outcome of the test case as a whole:</p><table><tr><th>Status</th><th>[assert]</th><th>Test Case</th></tr><tr><td>PASS</td><td>PASS</td><td>PASS</td></tr><tr><td>PASS</td><td>FAIL</td><td>FAIL</td></tr><tr><td>FAIL</td><td>PASS</td><td>XPASS</td></tr><tr><td>FAIL</td><td>FAIL</td><td>XFAIL</td></tr><tr><td>SKIP</td><td></td><td>SKIPPED</td></tr></table><p>The outcome is reported by an exit code and an exit identifier printed as a single line on stdout.</p><table><tr><th>Test Case</th><th>Exit identifier</th><th>Exit code</th></tr><tr><td>PASS</td><td><span class="syntax-text">PASS</span></td><td>0</td></tr><tr><td>FAIL</td><td><span class="syntax-text">FAIL</span></td><td>32</td></tr><tr><td>XPASS</td><td><span class="syntax-text">XPASS</span></td><td>33</td></tr><tr><td>XFAIL</td><td><span class="syntax-text">XFAIL</span></td><td>33</td></tr><tr><td>SKIPPED</td><td><span class="syntax-text">SKIPPED</span></td><td>0</td></tr></table></section><section class="toc" id="custom.test-case.spec.outcome.scenarios.error-during-validation"><header><h5>Error during validation</h5></header><p>If validation fails, the test case is not executed.</p><p>The outcome is reported by an exit code and an exit identifier printed as a single line on stdout.</p><table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">VALIDATION_ERROR</span></td></tr></table></section><section class="toc" id="custom.test-case.spec.outcome.scenarios.error-during-execution"><header><h5>Error during execution</h5></header><p>If an error occur during the execution of a test, then this will halt the test and be reported as an error, and not as a failed test.</p><p>Note that an error will be reported even if both the "act" and "assert" phases have been executed successfully.</p><p>The outcome is reported by an exit code and an exit identifier printed as a single line on stdout.</p><p>The execution may be interrupted by the following causes:</p><ul><li>Hard error<p>An instruction fails to do its job.
E.g. an instruction in the "setup" phase fails to create a file.</p><table><tr><th>Exit code</th><td>128</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">HARD_ERROR</span></td></tr></table></li><li>Internal error<p>An error in the implementation of Exactly, or similar, is detected.</p><table><tr><th>Exit code</th><td>129</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">INTERNAL_ERROR</span></td></tr></table></li></ul></section><section class="toc" id="custom.test-case.spec.outcome.scenarios.other-errors"><header><h5>Other errors</h5></header><p>If parsing of command line arguments fails, Exactly halts with exit code 64 (no exit identifier is printed).</p><p>Otherwise an exit identifier is printed as a single line on stdout.</p><p>The following errors may occur:</p><ul><li>File access<p>Failure of accessing a file referenced via "including".</p><table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">FILE_ACCESS_ERROR</span></td></tr></table></li><li>Preprocessing<p>Fails if the preprocessor program cannot be executed, 
or if it exits with a non-zero exit code.
</p><table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">PRE_PROCESS_ERROR</span></td></tr></table></li><li>Syntax checking<p>Fails if the test case contains a syntax error.</p><p>Also fails if the test case is run as part of a test suite, and the test suite contains a syntax error.</p><table><tr><th>Exit code</th><td>65</td></tr><tr><th>Exit identifier</th><td><span class="syntax-text">SYNTAX_ERROR</span></td></tr></table></li></ul></section></section><section class="toc" id="custom.test-case.spec.outcome.summary-of-exit-codes"><header><h4>Summary of exit codes and identifiers</h4></header><table><tr><th>Exit identifier</th><th>Exit code</th></tr><tr><td><span class="syntax-text">FAIL</span></td><td>32</td></tr><tr><td><span class="syntax-text">FILE_ACCESS_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">HARD_ERROR</span></td><td>128</td></tr><tr><td><span class="syntax-text">INTERNAL_ERROR</span></td><td>129</td></tr><tr><td><span class="syntax-text">PASS</span></td><td>0</td></tr><tr><td><span class="syntax-text">PRE_PROCESS_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">SKIPPED</span></td><td>0</td></tr><tr><td><span class="syntax-text">SYNTAX_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">VALIDATION_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">XFAIL</span></td><td>33</td></tr><tr><td><span class="syntax-text">XPASS</span></td><td>33</td></tr></table></section></section></section><section class="toc" id="custom.test-case.phases"><header><h2>Phases</h2></header><article class="section toc" id="test-case.phase.conf"><header><h1><span class="syntax-text">[conf]</span></h1><p>Configures the execution of the remaining phases by setting "configuration parameters".</p></header><section><header><h1>Contents</h1></header><p>Consists of zero or more instructions.</p><p>Accepts the "including" directive.</p><p>Each instruction sets one of the "configuration parameters".</p></section><section><header><h1>Phase execution order</h1></header><p>This is the first phase.</p><p>If the "status" is set to SKIP, then the remaining phases are not executed.<br>Otherwise, the "setup" phase follows.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.instruction">Concept "instruction"</a></li><li><a href="#entity.concept.directive">Concept "directive"</a></li><li><a href="#entity.concept.configuration-parameter">Concept "configuration parameter"</a></li><li><a href="#entity.confparam.status">Configuration parameter "status"</a></li><li><a href="#test-case.instruction.conf.status">Instruction "status" (in phase [conf])</a></li><li><a href="#test-case.phase.setup">Phase [setup]</a></li></ul></section><section><header><h1>Instructions</h1></header><table><tr><td><a href="#test-case.instruction.conf.act-home"><span class="syntax-text">act-home</span></a></td><td>Sets the "act-home" directory</td></tr><tr><td><a href="#test-case.instruction.conf.actor"><span class="syntax-text">actor</span></a></td><td>Specifies the "actor" that will execute the "act" phase</td></tr><tr><td><a href="#test-case.instruction.conf.home"><span class="syntax-text">home</span></a></td><td>Sets the "home" directory</td></tr><tr><td><a href="#test-case.instruction.conf.status"><span class="syntax-text">status</span></a></td><td>Sets the "test case status" configuration parameter</td></tr><tr><td><a href="#test-case.instruction.conf.timeout"><span class="syntax-text">timeout</span></a></td><td>Sets the timeout of sub processes executed by instructions and the "act" phase.</td></tr></table></section></article><article class="section toc" id="test-case.phase.setup"><header><h1><span class="syntax-text">[setup]</span></h1><p>Sets up the environment that the "action to check"
(the "act" phase) is executed in.
</p></header><p>E.g.</p><ul><li>populating the current directory with files and directories</li><li>setting the contents of stdin</li><li>setting environment variables</li><li>setting up external resources, such as databases.</li></ul><section><header><h1>Contents</h1></header><p>Consists of zero or more instructions.</p><p>Accepts the "including" directive.</p><p>Each instruction should probably have some side effect that affects the "action to check".</p></section><section><header><h1>Phase execution order</h1></header><p>If the "status" is set to SKIP, then this phase is not executed.<br>Otherwise:</p><p>This phase follows the "conf" phase, and is the first phase that is executed in the sandbox.</p><p>If any of the instructions fail, then execution jumps to the "cleanup" phase, and the test case halts with an error.<br>Otherwise, the "act" phase follows.</p></section><section><header><h1>Environment</h1></header><ul><li>Current directory<p>At the beginning of the phase, the "current directory" is the act directory in the "sandbox directory structure".</p></li><li>Environment variables<p>Environment variables are inherited from the parent process.</p></li></ul></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.instruction">Concept "instruction"</a></li><li><a href="#entity.concept.directive">Concept "directive"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.concept.environment-variable">Concept "environment variable"</a></li><li><a href="#test-case.phase.conf">Phase [conf]</a></li><li><a href="#test-case.phase.act">Phase [act]</a></li></ul></section><section><header><h1>Instructions</h1></header><table><tr><td><a href="#test-case.instruction.setup.$"><span class="syntax-text">$</span></a></td><td>Executes a command using the current operating system's shell</td></tr><tr><td><a href="#test-case.instruction.setup.%"><span class="syntax-text">%</span></a></td><td>Runs a program installed on the current system (in the OS PATH)</td></tr><tr><td><a href="#test-case.instruction.setup.cd"><span class="syntax-text">cd</span></a></td><td>Sets the "current directory"</td></tr><tr><td><a href="#test-case.instruction.setup.copy"><span class="syntax-text">copy</span></a></td><td>Copies files and directories into the "sandbox directory structure"</td></tr><tr><td><a href="#test-case.instruction.setup.def"><span class="syntax-text">def</span></a></td><td>Defines a symbol</td></tr><tr><td><a href="#test-case.instruction.setup.dir"><span class="syntax-text">dir</span></a></td><td>Creates a directory</td></tr><tr><td><a href="#test-case.instruction.setup.env"><span class="syntax-text">env</span></a></td><td>Manipulates environment variables</td></tr><tr><td><a href="#test-case.instruction.setup.file"><span class="syntax-text">file</span></a></td><td>Creates a file</td></tr><tr><td><a href="#test-case.instruction.setup.run"><span class="syntax-text">run</span></a></td><td>Runs a "program"</td></tr><tr><td><a href="#test-case.instruction.setup.stdin"><span class="syntax-text">stdin</span></a></td><td>Sets the contents of stdin for the "action to check"</td></tr></table></section></article><article class="section toc" id="test-case.phase.act"><header><h1><span class="syntax-text">[act]</span></h1><p>Contains the action to check; executes it and stores the outcome for later inspection.
</p></header><p>Executes the "action to check" as an OS process.<br>Its outcome is stored as files in the result directory of the "sandbox directory structure":</p><table><tr><th>exit code</th><td><span class="syntax-text">result/exitcode</span></td></tr><tr><th>stdout</th><td><span class="syntax-text">result/stdout</span></td></tr><tr><th>stderr</th><td><span class="syntax-text">result/stderr</span></td></tr></table><p>The actor configured for the test case determines what the "act" phase will execute.</p><p>Default actor is: "command line" - Executes a command line, in terms of a PROGRAM</p><p>If the "act" phase is not specified, or if its contents is empty, then the "null" actor is used.</p><p>This is the default phase.</p><section><header><h1>Contents</h1></header><p>The source of the "action to check".</p><p>The syntax depends on which "actor" is used.</p><p>The "including" directive cannot be used.</p><p>Some escape sequences exist to make it possible to have contents that would otherwise be treated as phase headers.<br>The escape sequences are only recognized at the first non-space characters of a line.</p><table><tr><th>Source</th><th>Translation</th></tr><tr><td><span class="syntax-text">\[</span></td><td><span class="syntax-text">[</span></td></tr><tr><td><span class="syntax-text">\\</span></td><td><span class="syntax-text">\</span></td></tr></table></section><section><header><h1>Phase execution order</h1></header><p>If the "status" is set to SKIP, then this phase is not executed.<br>Otherwise:</p><p>This phase is executed directly after the "setup" phase.</p><p>If the "action to check" cannot be executed, then execution jumps to the "cleanup" phase, and the test case halts with an error.<br>Otherwise, the "before-assert" phase follows.</p></section><section><header><h1>Environment</h1></header><ul><li>Current directory<p>The "current directory" is the same as at the end of the previous phase.<br>(which is the act directory in the "sandbox directory structure", if it has not been changed.)</p></li><li>Environment variables<p>Environment variables are inherited from the previous phase.</p></li><li>stdin<p>The contents set by the "stdin" instruction in the "setup" phase.</p><p>Empty otherwise.</p></li><li>Timeout<p>The value specified via the "timeout" configuration parameter.</p></li></ul></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#entity.concept.action-to-check">Concept "action to check"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.concept.environment-variable">Concept "environment variable"</a></li><li><a href="#entity.confparam.actor">Configuration parameter "actor"</a></li><li><a href="#entity.confparam.timeout">Configuration parameter "timeout"</a></li><li><a href="#help-part.TEST_CASE_CLI">Test case CLI</a></li><li><a href="#test-case.phase.setup">Phase [setup]</a></li><li><a href="#test-case.phase.before-assert">Phase [before-assert]</a></li><li><a href="#test-case.phase.assert">Phase [assert]</a></li><li><a href="#test-case.instruction.setup.stdin">Instruction "stdin" (in phase [setup])</a></li></ul></section></article><article class="section toc" id="test-case.phase.before-assert"><header><h1><span class="syntax-text">[before-assert]</span></h1><p>Prepares for the "assert" phase.
</p></header><p>E.g. processing files and setting "current directory", in order to make the assertions in the "assert" phase smooth.</p><p>Note that such preparations might as well be done as part of the "assert" phase.</p><p>Doing the preparations in this phase can make the "assert" phase cleaner, since the "assert" phase then can consist solely of instructions that do "real" assertions (as opposed to preparations for assertions).</p><p>The drawback is that if an instruction in this phase fails, then no assertions will have been executed and one will not know if any of the assertions would pass.</p><section><header><h1>Contents</h1></header><p>Consists of zero or more instructions.</p><p>Accepts the "including" directive.</p><p>Each instruction should probably have some side effect that supports the instructions in the "assert" phase.</p></section><section><header><h1>Phase execution order</h1></header><p>If the "status" is set to SKIP, then this phase is not executed.<br>Otherwise:</p><p>This phase is executed directly after the "act" phase.</p><p>If any of the instructions fail, then execution jumps to the "cleanup" phase, and the test case halts with an error.<br>Otherwise, the "assert" phase follows.</p></section><section><header><h1>Environment</h1></header><ul><li>Current directory<p>The "current directory" is the same as at the end of the "setup" phase.<br>(which is the act directory in the "sandbox directory structure", if it has not been changed.)</p></li><li>Environment variables<p>Environment variables are inherited from the previous phase.</p></li></ul></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.instruction">Concept "instruction"</a></li><li><a href="#entity.concept.directive">Concept "directive"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.concept.environment-variable">Concept "environment variable"</a></li><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#test-case.phase.assert">Phase [assert]</a></li></ul></section><section><header><h1>Instructions</h1></header><table><tr><td><a href="#test-case.instruction.before-assert.$"><span class="syntax-text">$</span></a></td><td>Executes a command using the current operating system's shell</td></tr><tr><td><a href="#test-case.instruction.before-assert.%"><span class="syntax-text">%</span></a></td><td>Runs a program installed on the current system (in the OS PATH)</td></tr><tr><td><a href="#test-case.instruction.before-assert.cd"><span class="syntax-text">cd</span></a></td><td>Sets the "current directory"</td></tr><tr><td><a href="#test-case.instruction.before-assert.copy"><span class="syntax-text">copy</span></a></td><td>Copies files and directories into the "sandbox directory structure"</td></tr><tr><td><a href="#test-case.instruction.before-assert.def"><span class="syntax-text">def</span></a></td><td>Defines a symbol</td></tr><tr><td><a href="#test-case.instruction.before-assert.dir"><span class="syntax-text">dir</span></a></td><td>Creates a directory</td></tr><tr><td><a href="#test-case.instruction.before-assert.env"><span class="syntax-text">env</span></a></td><td>Manipulates environment variables</td></tr><tr><td><a href="#test-case.instruction.before-assert.file"><span class="syntax-text">file</span></a></td><td>Creates a file</td></tr><tr><td><a href="#test-case.instruction.before-assert.run"><span class="syntax-text">run</span></a></td><td>Runs a "program"</td></tr></table></section></article><article class="section toc" id="test-case.phase.assert"><header><h1><span class="syntax-text">[assert]</span></h1><p>Assertions on the outcome of the "action to check" (the "act" phase) that determine
the outcome of the test case.
</p></header><p>If any of the instructions in this phase FAIL, then the outcome of the test case is FAIL, otherwise it is PASS.</p><p>An exception to the above is if an instruction encounters an unexpected problem that makes it neither PASS nor FAIL, in which case the outcome of the test case will indicate this unexpected problem instead of PASS or FAIL.</p><section><header><h1>Contents</h1></header><p>Consists of zero or more instructions.</p><p>Accepts the "including" directive.</p><p>Every instructions in the "assert" phase is an assertion that report its outcome as either PASS or FAIL.</p><p>If an instruction encounter a problem that prevents it from completing its work, it reports this as HARD_ERROR.</p><p>In practice, though, some instructions may have more of a purpose of "preparation" for an assertion - they are helpers for the assertions.<br>Such a preparation might be to sort a file that the "action to check" has produced, so that it's possible to compare it with a constant file containing the expected sorted output, e.g.</p><p>This kind of preparation can also be done in the "before-assert" phase, but it might be more suitable to put it in the "assert" phase right before the instruction that does the "true" assertion.</p><ul><li>Assertions<p>Instructions that serve as assertions.</p></li><li>Assertions and helpers<p>Instructions that may serve as either an assertion or a helper for an assertion.</p></li><li>Helpers<p>Instructions that prepare things for assertion instructions, and that are not assertions in them selves.</p><p>Typically, if these instructions cannot do their job, they report HARD_ERROR, instead of FAIL.</p><p>Note that the preparation done by such an instruction can perhaps be done in [before-assert].</p></li></ul></section><section><header><h1>Phase execution order</h1></header><p>If the "status" is set to SKIP, then this phase is not executed.<br>Otherwise:</p><p>This phase is executed directly after the "before-assert" phase.</p><p>This phase is followed by the "cleanup" phase.</p><p>If any of the instructions FAIL, remaining instructions in the phase will be skipped and the execution will jump directly to the "cleanup" phase.</p></section><section><header><h1>Environment</h1></header><ul><li>Current directory<p>The "current directory" is the same as at the end of the previous phase.<br>(which is the act directory in the "sandbox directory structure", if it has not been changed.)</p></li><li>Environment variables<p>Environment variables are inherited from the previous phase.</p></li></ul></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.instruction">Concept "instruction"</a></li><li><a href="#entity.concept.directive">Concept "directive"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.concept.environment-variable">Concept "environment variable"</a></li><li><a href="#test-case.phase.before-assert">Phase [before-assert]</a></li><li><a href="#test-case.phase.cleanup">Phase [cleanup]</a></li></ul></section><section><header><h1>Instructions</h1></header><ul><li>Assertions<table><tr><td><a href="#test-case.instruction.assert.contents"><span class="syntax-text">contents</span></a></td><td>Tests the contents of a file</td></tr><tr><td><a href="#test-case.instruction.assert.dir-contents"><span class="syntax-text">dir-contents</span></a></td><td>Tests the contents of a directory</td></tr><tr><td><a href="#test-case.instruction.assert.exists"><span class="syntax-text">exists</span></a></td><td>Tests the existence, and optionally properties, of a file</td></tr><tr><td><a href="#test-case.instruction.assert.exit-code"><span class="syntax-text">exit-code</span></a></td><td>Tests the exit code of the "action to check"</td></tr><tr><td><a href="#test-case.instruction.assert.stderr"><span class="syntax-text">stderr</span></a></td><td>Tests the contents of stderr from the "action to check", or from a "program"</td></tr><tr><td><a href="#test-case.instruction.assert.stdout"><span class="syntax-text">stdout</span></a></td><td>Tests the contents of stdout from the "action to check", or from a "program"</td></tr></table></li><li>Assertions and helpers<table><tr><td><a href="#test-case.instruction.assert.$"><span class="syntax-text">$</span></a></td><td>Executes a command using the current operating system's shell, and PASS iff its exit code is 0</td></tr><tr><td><a href="#test-case.instruction.assert.%"><span class="syntax-text">%</span></a></td><td>Runs a program installed on the current system (in the OS PATH), and PASS iff its exit code is 0</td></tr><tr><td><a href="#test-case.instruction.assert.run"><span class="syntax-text">run</span></a></td><td>Runs a "program", and PASS iff its exit code is 0</td></tr></table></li><li>Helpers<table><tr><td><a href="#test-case.instruction.assert.cd"><span class="syntax-text">cd</span></a></td><td>Sets the "current directory"</td></tr><tr><td><a href="#test-case.instruction.assert.copy"><span class="syntax-text">copy</span></a></td><td>Copies files and directories into the "sandbox directory structure"</td></tr><tr><td><a href="#test-case.instruction.assert.def"><span class="syntax-text">def</span></a></td><td>Defines a symbol</td></tr><tr><td><a href="#test-case.instruction.assert.dir"><span class="syntax-text">dir</span></a></td><td>Creates a directory</td></tr><tr><td><a href="#test-case.instruction.assert.env"><span class="syntax-text">env</span></a></td><td>Manipulates environment variables</td></tr><tr><td><a href="#test-case.instruction.assert.file"><span class="syntax-text">file</span></a></td><td>Creates a file</td></tr></table></li></ul></section></article><article class="section toc" id="test-case.phase.cleanup"><header><h1><span class="syntax-text">[cleanup]</span></h1><p>Cleans up pollution from earlier phases that exist outside of the sandbox
(e.g. in a database).
</p></header><p>Pollution can come from an earlier phase such as [setup], or the "action to check" of the "act" phase.</p><section><header><h1>Contents</h1></header><p>Consists of zero or more instructions.</p><p>Accepts the "including" directive.</p><p>Each instruction probably has some side effect that does some cleanup.</p></section><section><header><h1>Phase execution order</h1></header><p>If the "status" is set to SKIP, then this phase is not executed.<br>Otherwise:</p><p>This phase is always executed.</p><p>If an instruction in an earlier phase encountered an unexpected error, then execution has jumped directly from that instruction to this phase.<br>If no unexpected error has occurred, then this phase follows the "assert" phase.</p><p>This is the last phase.</p></section><section><header><h1>Environment</h1></header><ul><li>Current directory<p>The "current directory" is the same as at the end of the previous phase.<br>(which is the act directory in the "sandbox directory structure", if it has not been changed.)</p></li><li>Environment variables<p>Environment variables are inherited from the previous phase.</p></li></ul></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.instruction">Concept "instruction"</a></li><li><a href="#entity.concept.directive">Concept "directive"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.concept.environment-variable">Concept "environment variable"</a></li><li><a href="#entity.confparam.status">Configuration parameter "status"</a></li><li><a href="#test-case.phase.assert">Phase [assert]</a></li><li><a href="#test-case.instruction.conf.status">Instruction "status" (in phase [conf])</a></li></ul></section><section><header><h1>Instructions</h1></header><table><tr><td><a href="#test-case.instruction.cleanup.$"><span class="syntax-text">$</span></a></td><td>Executes a command using the current operating system's shell</td></tr><tr><td><a href="#test-case.instruction.cleanup.%"><span class="syntax-text">%</span></a></td><td>Runs a program installed on the current system (in the OS PATH)</td></tr><tr><td><a href="#test-case.instruction.cleanup.cd"><span class="syntax-text">cd</span></a></td><td>Sets the "current directory"</td></tr><tr><td><a href="#test-case.instruction.cleanup.copy"><span class="syntax-text">copy</span></a></td><td>Copies files and directories into the "sandbox directory structure"</td></tr><tr><td><a href="#test-case.instruction.cleanup.def"><span class="syntax-text">def</span></a></td><td>Defines a symbol</td></tr><tr><td><a href="#test-case.instruction.cleanup.dir"><span class="syntax-text">dir</span></a></td><td>Creates a directory</td></tr><tr><td><a href="#test-case.instruction.cleanup.env"><span class="syntax-text">env</span></a></td><td>Manipulates environment variables</td></tr><tr><td><a href="#test-case.instruction.cleanup.file"><span class="syntax-text">file</span></a></td><td>Creates a file</td></tr><tr><td><a href="#test-case.instruction.cleanup.run"><span class="syntax-text">run</span></a></td><td>Runs a "program"</td></tr></table></section></article></section><section class="toc" id="custom.test-case.directives"><header><h2>Directives</h2></header><article class="directive entity toc" id="entity.directive.including"><header><h1><span class="syntax-text">including</span></h1><p>Includes test case contents from an external file</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">including FILE</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">FILE</span></dt><dd><p>The absolute or relative path of an existing file.</p><p>If FILE is relative, then it's relative to the directory of the current source file.</p><p>Paths uses Posix syntax.</p></dd></dl></section><section><header><h1>DESCRIPTION</h1></header><p>The effect of including a file is equivalent to having the contents of the included file in the including file; except that the current phase of the including file cannot be changed by an included file.</p><p>The default phase of the included file is the phase from which the file is included.</p><p>The included file may contain contents of different phases, by declaring different phases just as in a main test case file.<br>But the phase of the including file is not changed.</p></section></article></section><section class="toc" id="custom.test-case.instructions"><header><h2>Instructions per phase</h2></header><section class="toc" id="custom.test-case.instructions.conf"><header><h3><span class="syntax-text">[conf]</span></h3></header><p>The instructions in the "conf" phase.</p><article class="instruction toc" id="test-case.instruction.conf.act-home"><header><h1><span class="syntax-text">act-home</span></h1><p>Sets the "act-home" directory</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">act-home = DIRECTORY</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">DIRECTORY</span></dt><dd><p>The absolute or relative path of an existing directory.</p><p>If DIRECTORY is relative, then it's relative to the location of the current source file - the file that contains the instruction.</p><p>Paths uses Posix syntax.</p></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.confparam.act-home">Configuration parameter "act-home"</a></li><li><a href="#entity.concept.home-directory-structure">Concept "home directory structure"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.conf.actor"><header><h1><span class="syntax-text">actor</span></h1><p>Specifies the "actor" that will execute the "act" phase</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">actor = command</span></dt><dd><p>Specifies that the "command line" "actor" should be used.</p></dd><dt><span class="syntax-text">actor = file ACT-INTERPRETER</span></dt><dd><p>Specifies that the "file interpreter" "actor" should be used, with the given interpreter.</p></dd><dt><span class="syntax-text">actor = source ACT-INTERPRETER</span></dt><dd><p>Specifies that the "source interpreter" "actor" should be used, with the given interpreter.</p></dd><dt><span class="syntax-text">actor = null</span></dt><dd><p>Specifies that the "null" "actor" should be used.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>The "actor" specified by this instruction has precedence over all other ways to specify the actor.</p><p>ACT-INTERPRETER may reference symbols defined in the "setup" phase.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#entity.syntax.ACT-INTERPRETER">Syntax element "ACT-INTERPRETER"</a></li><li><a href="#entity.actor.command-line">Actor "command line"</a></li><li><a href="#entity.actor.file-interpreter">Actor "file interpreter"</a></li><li><a href="#entity.actor.source-interpreter">Actor "source interpreter"</a></li><li><a href="#entity.actor.null">Actor "null"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.conf.home"><header><h1><span class="syntax-text">home</span></h1><p>Sets the "home" directory</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">home = DIRECTORY</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">DIRECTORY</span></dt><dd><p>The absolute or relative path of an existing directory.</p><p>If DIRECTORY is relative, then it's relative to the location of the current source file - the file that contains the instruction.</p><p>Paths uses Posix syntax.</p></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.confparam.home">Configuration parameter "home"</a></li><li><a href="#entity.concept.home-directory-structure">Concept "home directory structure"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.conf.status"><header><h1><span class="syntax-text">status</span></h1><p>Sets the "test case status" configuration parameter</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">status = STATUS</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">STATUS</span></dt><dd><dl><dt><span class="enum-constant syntax-text">PASS</span></dt><dd><p>The test case is executed and the "assert" phase is expected to PASS.</p></dd><dt><span class="enum-constant syntax-text">FAIL</span></dt><dd><p>The test case is executed and the "assert" phase is expected to FAIL.</p><p>Outcome of the test case is XFAIL, if [assert] FAILs.<br>If [assert] PASS, the result is XPASS.</p></dd><dt><span class="enum-constant syntax-text">SKIP</span></dt><dd><p>The test case is not executed.</p><p>Outcome of the test case is SKIPPED.</p></dd></dl></dd></dl></section><section><header><h1>NOTES</h1></header><p>The default "test case status" is PASS.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.confparam.status">Configuration parameter "status"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.conf.timeout"><header><h1><span class="syntax-text">timeout</span></h1><p>Sets the timeout of sub processes executed by instructions and the "act" phase.</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">timeout = INTEGER</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">INTEGER</span></dt><dd><p>Timeout in seconds.</p><p>An expression that evaluates to an integer (using Python syntax).</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>Default: No timeout.</p><p>The timeout is per instruction, and for the "act" phase. It does not apply to the test case as a whole.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.confparam.timeout">Configuration parameter "timeout"</a></li></ul></section></article></section><section class="toc" id="custom.test-case.instructions.setup"><header><h3><span class="syntax-text">[setup]</span></h3></header><p>The instructions in the "setup" phase.</p><article class="instruction toc" id="test-case.instruction.setup.$"><header><h1><span class="syntax-text">$</span></h1><p>Executes a command using the current operating system's shell</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">$ SHELL-COMMAND-LINE</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if SHELL-COMMAND-LINE exits with a non-zero exit code.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.SHELL-COMMAND-LINE">Syntax element "SHELL-COMMAND-LINE"</a></li><li><a href="#test-case.instruction.setup.run">Instruction "run" (in phase [setup])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.%"><header><h1><span class="syntax-text">%</span></h1><p>Runs a program installed on the current system (in the OS PATH)</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">% STRING [PROGRAM-ARGUMENT]...</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if the program exits with a non-zero exit code.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT">Syntax element "PROGRAM-ARGUMENT"</a></li><li><a href="#test-case.instruction.setup.run">Instruction "run" (in phase [setup])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.cd"><header><h1><span class="syntax-text">cd</span></h1><p>Sets the "current directory"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">cd PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.copy"><header><h1><span class="syntax-text">copy</span></h1><p>Copies files and directories into the "sandbox directory structure"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">copy SOURCE [DESTINATION]</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">SOURCE</span></dt><dd><p>The PATH of an existing file or directory.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd><dt><span class="syntax-text">DESTINATION</span></dt><dd><p>The PATH of an existing directory, or a non-existing path.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>DESCRIPTION</h1></header><ul><li>If DESTINATION is not given<p>SOURCE is installed in the "current directory", as a file/directory with the basename of SOURCE.</p></li><li>If DESTINATION is given, but does not exist<p>SOURCE is copied as a file/directory with the path of DESTINATION<br>(the basename of SOURCE is not preserved).</p><p>Intermediate directories as created, if required.</p></li><li>If DESTINATION does exist<p>it must be a directory, and SOURCE is copied into that directory, as a file/directory with the basename of SOURCE.</p></li></ul></section><section><header><h1>NOTES</h1></header><p>If given, DESTINATION must appear on the same line as SOURCE.</p><p>As many attributes as possible of the copied files are preserved (this depends on the Python implementation).</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.def"><header><h1><span class="syntax-text">def</span></h1><p>Defines a symbol</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">def TYPE SYMBOL-NAME = VALUE</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">TYPE, VALUE</span></dt><dd><table><tr><th>TYPE</th><th>VALUE</th></tr><tr><td><span class="syntax-text">string</span></td><td><span class="syntax-text">(STRING|HERE-DOCUMENT)</span></td></tr><tr><td><span class="syntax-text">list</span></td><td><span class="syntax-text">[ELEMENT]...</span></td></tr><tr><td><span class="syntax-text">path</span></td><td><span class="syntax-text">PATH</span></td></tr><tr><td><span class="syntax-text">integer-matcher</span></td><td><span class="syntax-text">INTEGER-MATCHER</span></td></tr><tr><td><span class="syntax-text">line-matcher</span></td><td><span class="syntax-text">LINE-MATCHER</span></td></tr><tr><td><span class="syntax-text">file-matcher</span></td><td><span class="syntax-text">FILE-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-matcher</span></td><td><span class="syntax-text">FILES-MATCHER</span></td></tr><tr><td><span class="syntax-text">string-matcher</span></td><td><span class="syntax-text">STRING-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-condition</span></td><td><span class="syntax-text">FILES-CONDITION</span></td></tr><tr><td><span class="syntax-text">string-transformer</span></td><td><span class="syntax-text">STRING-TRANSFORMER</span></td></tr><tr><td><span class="syntax-text">program</span></td><td><span class="syntax-text">PROGRAM</span></td></tr></table></dd><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr><tr><td><span class="syntax-text">-rel SYMBOL-NAME</span></td><td>value of path symbol</td></tr><tr><td><span class="syntax-text">-rel-here</span></td><td>location of the current source file</td></tr></table><p>Note: When a PATH value is defined to be relative the "current directory", it means that it is relative the directory that is current when the symbol is REFERENCED,<br>not when it is defined.</p></dd><dt><span class="syntax-text">STRING</span></dt><dd><p>A single word, or a single quoted text.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>A combination of alphanumeric characters and underscores.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>SYMBOL-NAME must not have been defined earlier.</p><p>The defined symbol is available in all following instructions and phases.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.concept.type">Concept "type"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.HERE-DOCUMENT">Syntax element "HERE-DOCUMENT"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.dir"><header><h1><span class="syntax-text">dir</span></h1><p>Creates a directory</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">dir PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>NOTES</h1></header><p>Intermediate directories as created, if required.</p><p>If the directory already exists, nothing is done.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.env"><header><h1><span class="syntax-text">env</span></h1><p>Manipulates environment variables</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">env NAME = STRING</span></dt><dd><p>Sets the environment variable NAME to STRING.</p><p>Elements of the form "${var_name}" in STRING, will be replaced with the value of the environment variable "var_name", or the empty string, if there is no environment variable with that name.</p></dd><dt><span class="syntax-text">env unset NAME</span></dt><dd><p>Removes the environment variable NAME.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>The manipulation affects all following phases.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.file"><header><h1><span class="syntax-text">file</span></h1><p>Creates a file</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">file PATH</span></dt><dd><p>Creates an empty file.</p></dd><dt><span class="syntax-text">file PATH = STRING-SOURCE</span></dt><dd><p>Creates a file with contents given by STRING-SOURCE.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.STRING-SOURCE">Syntax element "STRING-SOURCE"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.run"><header><h1><span class="syntax-text">run</span></h1><p>Runs a "program"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">run [-ignore-exit-code] PROGRAM</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if the exit code is non-zero, unless -ignore-exit-code is given.</p></section><section><header><h1>NOTES</h1></header><p>The program must terminate.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.type.program">Type "program"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.setup.stdin"><header><h1><span class="syntax-text">stdin</span></h1><p>Sets the contents of stdin for the "action to check"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">stdin = (STRING|HERE-DOCUMENT|-file PATH)</span></dt><dd><p>Sets stdin to be the contents of a string, HERE-DOCUMENT or file.</p><p>Any SYMBOL-REFERENCE appearing in the file PATH is NOT substituted.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of the file that will be the contents of stdin.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.HERE-DOCUMENT">Syntax element "HERE-DOCUMENT"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li></ul></section></article></section><section class="toc" id="custom.test-case.instructions.before-assert"><header><h3><span class="syntax-text">[before-assert]</span></h3></header><p>The instructions in the "before-assert" phase.</p><article class="instruction toc" id="test-case.instruction.before-assert.$"><header><h1><span class="syntax-text">$</span></h1><p>Executes a command using the current operating system's shell</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">$ SHELL-COMMAND-LINE</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if SHELL-COMMAND-LINE exits with a non-zero exit code.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.SHELL-COMMAND-LINE">Syntax element "SHELL-COMMAND-LINE"</a></li><li><a href="#test-case.instruction.before-assert.run">Instruction "run" (in phase [before-assert])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.%"><header><h1><span class="syntax-text">%</span></h1><p>Runs a program installed on the current system (in the OS PATH)</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">% STRING [PROGRAM-ARGUMENT]...</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if the program exits with a non-zero exit code.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT">Syntax element "PROGRAM-ARGUMENT"</a></li><li><a href="#test-case.instruction.before-assert.run">Instruction "run" (in phase [before-assert])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.cd"><header><h1><span class="syntax-text">cd</span></h1><p>Sets the "current directory"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">cd PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.copy"><header><h1><span class="syntax-text">copy</span></h1><p>Copies files and directories into the "sandbox directory structure"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">copy SOURCE [DESTINATION]</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">SOURCE</span></dt><dd><p>The PATH of an existing file or directory.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd><dt><span class="syntax-text">DESTINATION</span></dt><dd><p>The PATH of an existing directory, or a non-existing path.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>DESCRIPTION</h1></header><ul><li>If DESTINATION is not given<p>SOURCE is installed in the "current directory", as a file/directory with the basename of SOURCE.</p></li><li>If DESTINATION is given, but does not exist<p>SOURCE is copied as a file/directory with the path of DESTINATION<br>(the basename of SOURCE is not preserved).</p><p>Intermediate directories as created, if required.</p></li><li>If DESTINATION does exist<p>it must be a directory, and SOURCE is copied into that directory, as a file/directory with the basename of SOURCE.</p></li></ul></section><section><header><h1>NOTES</h1></header><p>If given, DESTINATION must appear on the same line as SOURCE.</p><p>As many attributes as possible of the copied files are preserved (this depends on the Python implementation).</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.def"><header><h1><span class="syntax-text">def</span></h1><p>Defines a symbol</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">def TYPE SYMBOL-NAME = VALUE</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">TYPE, VALUE</span></dt><dd><table><tr><th>TYPE</th><th>VALUE</th></tr><tr><td><span class="syntax-text">string</span></td><td><span class="syntax-text">(STRING|HERE-DOCUMENT)</span></td></tr><tr><td><span class="syntax-text">list</span></td><td><span class="syntax-text">[ELEMENT]...</span></td></tr><tr><td><span class="syntax-text">path</span></td><td><span class="syntax-text">PATH</span></td></tr><tr><td><span class="syntax-text">integer-matcher</span></td><td><span class="syntax-text">INTEGER-MATCHER</span></td></tr><tr><td><span class="syntax-text">line-matcher</span></td><td><span class="syntax-text">LINE-MATCHER</span></td></tr><tr><td><span class="syntax-text">file-matcher</span></td><td><span class="syntax-text">FILE-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-matcher</span></td><td><span class="syntax-text">FILES-MATCHER</span></td></tr><tr><td><span class="syntax-text">string-matcher</span></td><td><span class="syntax-text">STRING-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-condition</span></td><td><span class="syntax-text">FILES-CONDITION</span></td></tr><tr><td><span class="syntax-text">string-transformer</span></td><td><span class="syntax-text">STRING-TRANSFORMER</span></td></tr><tr><td><span class="syntax-text">program</span></td><td><span class="syntax-text">PROGRAM</span></td></tr></table></dd><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr><tr><td><span class="syntax-text">-rel SYMBOL-NAME</span></td><td>value of path symbol</td></tr><tr><td><span class="syntax-text">-rel-here</span></td><td>location of the current source file</td></tr></table><p>Note: When a PATH value is defined to be relative the "current directory", it means that it is relative the directory that is current when the symbol is REFERENCED,<br>not when it is defined.</p></dd><dt><span class="syntax-text">STRING</span></dt><dd><p>A single word, or a single quoted text.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>A combination of alphanumeric characters and underscores.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>SYMBOL-NAME must not have been defined earlier.</p><p>The defined symbol is available in all following instructions and phases.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.concept.type">Concept "type"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.HERE-DOCUMENT">Syntax element "HERE-DOCUMENT"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.dir"><header><h1><span class="syntax-text">dir</span></h1><p>Creates a directory</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">dir PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>NOTES</h1></header><p>Intermediate directories as created, if required.</p><p>If the directory already exists, nothing is done.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.env"><header><h1><span class="syntax-text">env</span></h1><p>Manipulates environment variables</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">env NAME = STRING</span></dt><dd><p>Sets the environment variable NAME to STRING.</p><p>Elements of the form "${var_name}" in STRING, will be replaced with the value of the environment variable "var_name", or the empty string, if there is no environment variable with that name.</p></dd><dt><span class="syntax-text">env unset NAME</span></dt><dd><p>Removes the environment variable NAME.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>The manipulation affects all following phases.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.file"><header><h1><span class="syntax-text">file</span></h1><p>Creates a file</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">file PATH</span></dt><dd><p>Creates an empty file.</p></dd><dt><span class="syntax-text">file PATH = STRING-SOURCE</span></dt><dd><p>Creates a file with contents given by STRING-SOURCE.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.STRING-SOURCE">Syntax element "STRING-SOURCE"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.before-assert.run"><header><h1><span class="syntax-text">run</span></h1><p>Runs a "program"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">run [-ignore-exit-code] PROGRAM</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if the exit code is non-zero, unless -ignore-exit-code is given.</p></section><section><header><h1>NOTES</h1></header><p>The program must terminate.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.type.program">Type "program"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li></ul></section></article></section><section class="toc" id="custom.test-case.instructions.assert"><header><h3><span class="syntax-text">[assert]</span></h3></header><p>The instructions in the "assert" phase.</p><section class="toc" id="custom.test-case.instructions.assert.assertion"><header><h4>Assertions</h4></header><p>Instructions that serve as assertions.</p><article class="instruction toc" id="test-case.instruction.assert.contents"><header><h1><span class="syntax-text">contents</span></h1><p>Tests the contents of a file</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">contents PATH STRING-MATCHER</span></dt><dd><p>Asserts that the contents of PATH satisfies STRING-MATCHER.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of the file who's contents is checked.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if PATH is not an existing regular file.</p></section><section><header><h1>NOTES</h1></header><p>Symbolic links are followed</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.STRING-MATCHER">Syntax element "STRING-MATCHER"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.dir-contents"><header><h1><span class="syntax-text">dir-contents</span></h1><p>Tests the contents of a directory</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">dir-contents PATH [DIR-CONTENTS-OPTIONS] FILES-MATCHER</span></dt><dd><p>Asserts that the files in the directory PATH satisfies FILES-MATCHER.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of the directory who's contents is checked.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd><dt><span class="syntax-text">DIR-CONTENTS-OPTIONS</span></dt><dd><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">-recursive [-min-depth INTEGER] [-max-depth INTEGER]</span></dt><dd><p>Includes sub directory contents (recursively).</p><p>Sub directory contents may be limited by specifying limits for the depth.</p><p>Depth 0 is the direct contents of the tested directory.</p></dd></dl><p>By default, only the direct contents of the tested directory is included - sub directory contents is excluded.</p></dd></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if PATH is not an existing directory.</p></section><section><header><h1>NOTES</h1></header><p>The '.' and '..' directory entries are not included in the set of matched files.</p><p>Symbolic links are followed</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.FILES-MATCHER">Syntax element "FILES-MATCHER"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.exists"><header><h1><span class="syntax-text">exists</span></h1><p>Tests the existence, and optionally properties, of a file</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">exists [!] PATH [FILE-PROPERTIES]</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">!</span></dt><dd><p>Negates the assertion.</p></dd><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd><dt><span class="syntax-text">FILE-PROPERTIES</span></dt><dd><p>Applies a FILE-MATCHER on PATH, if it exists.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">: FILE-MATCHER</span></dt></dl></dd></dl></section><section><header><h1>OUTCOME</h1></header><ul><li>When not negated<p>PASS iff:<br>PATH exists, and has the given properties.</p></li><li>When negated<p>PASS iff:<br>PATH does not exist, or PATH does not have the given properties.</p></li></ul></section><section><header><h1>NOTES</h1></header><p>Symbolic links are not followed in the test of existence (so a broken symbolic link is considered to exist).</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.FILE-MATCHER">Syntax element "FILE-MATCHER"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.exit-code"><header><h1><span class="syntax-text">exit-code</span></h1><p>Tests the exit code of the "action to check"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">exit-code INTEGER-MATCHER</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>PASS iff the exit code of the "action to check" satisfies INTEGER-MATCHER.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.INTEGER-MATCHER">Syntax element "INTEGER-MATCHER"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.stderr"><header><h1><span class="syntax-text">stderr</span></h1><p>Tests the contents of stderr from the "action to check", or from a "program"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">stderr STRING-MATCHER</span></dt><dd><p>Asserts that stderr from the "action to check" satisfies STRING-MATCHER.</p></dd><dt><span class="syntax-text">stderr -from PROGRAM STRING-MATCHER</span></dt><dd><p>Asserts that stderr from a "program" satisfies STRING-MATCHER.</p><p>STRING-MATCHER must appear on a separate line.</p><p>The program is executed once (regardless of STRING-MATCHER).</p><p>The program must terminate.</p></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING-MATCHER">Syntax element "STRING-MATCHER"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li><li><a href="#entity.concept.action-to-check">Concept "action to check"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.stdout"><header><h1><span class="syntax-text">stdout</span></h1><p>Tests the contents of stdout from the "action to check", or from a "program"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">stdout STRING-MATCHER</span></dt><dd><p>Asserts that stdout from the "action to check" satisfies STRING-MATCHER.</p></dd><dt><span class="syntax-text">stdout -from PROGRAM STRING-MATCHER</span></dt><dd><p>Asserts that stdout from a "program" satisfies STRING-MATCHER.</p><p>STRING-MATCHER must appear on a separate line.</p><p>The program is executed once (regardless of STRING-MATCHER).</p><p>The program must terminate.</p></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING-MATCHER">Syntax element "STRING-MATCHER"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li><li><a href="#entity.concept.action-to-check">Concept "action to check"</a></li></ul></section></article></section><section class="toc" id="custom.test-case.instructions.assert.both"><header><h4>Assertions and helpers</h4></header><p>Instructions that may serve as either an assertion or a helper for an assertion.</p><article class="instruction toc" id="test-case.instruction.assert.$"><header><h1><span class="syntax-text">$</span></h1><p>Executes a command using the current operating system's shell, and PASS iff its exit code is 0</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">$ SHELL-COMMAND-LINE</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>PASS iff the exit code from SHELL-COMMAND-LINE is 0.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.SHELL-COMMAND-LINE">Syntax element "SHELL-COMMAND-LINE"</a></li><li><a href="#test-case.instruction.assert.run">Instruction "run" (in phase [assert])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.%"><header><h1><span class="syntax-text">%</span></h1><p>Runs a program installed on the current system (in the OS PATH), and PASS iff its exit code is 0</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">% STRING [PROGRAM-ARGUMENT]...</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>PASS iff the exit code from the program is 0.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT">Syntax element "PROGRAM-ARGUMENT"</a></li><li><a href="#test-case.instruction.assert.run">Instruction "run" (in phase [assert])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.run"><header><h1><span class="syntax-text">run</span></h1><p>Runs a "program", and PASS iff its exit code is 0</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">run [-ignore-exit-code] PROGRAM</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>PASS if the exit code is zero, or -ignore-exit-code is given.<br>Otherwise FAIL.</p></section><section><header><h1>NOTES</h1></header><p>The program must terminate.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.type.program">Type "program"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li></ul></section></article></section><section class="toc" id="custom.test-case.instructions.assert.helper"><header><h4>Helpers</h4></header><p>Instructions that prepare things for assertion instructions, and that are not assertions in them selves.</p><p>Typically, if these instructions cannot do their job, they report HARD_ERROR, instead of FAIL.</p><p>Note that the preparation done by such an instruction can perhaps be done in [before-assert].</p><article class="instruction toc" id="test-case.instruction.assert.cd"><header><h1><span class="syntax-text">cd</span></h1><p>Sets the "current directory"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">cd PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>NOTES</h1></header><p>In the "assert" phase, this instruction is mostly useful as a helper for writing assertions. The instruction is not an assertion on its own.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.copy"><header><h1><span class="syntax-text">copy</span></h1><p>Copies files and directories into the "sandbox directory structure"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">copy SOURCE [DESTINATION]</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">SOURCE</span></dt><dd><p>The PATH of an existing file or directory.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd><dt><span class="syntax-text">DESTINATION</span></dt><dd><p>The PATH of an existing directory, or a non-existing path.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>DESCRIPTION</h1></header><ul><li>If DESTINATION is not given<p>SOURCE is installed in the "current directory", as a file/directory with the basename of SOURCE.</p></li><li>If DESTINATION is given, but does not exist<p>SOURCE is copied as a file/directory with the path of DESTINATION<br>(the basename of SOURCE is not preserved).</p><p>Intermediate directories as created, if required.</p></li><li>If DESTINATION does exist<p>it must be a directory, and SOURCE is copied into that directory, as a file/directory with the basename of SOURCE.</p></li></ul></section><section><header><h1>NOTES</h1></header><p>If given, DESTINATION must appear on the same line as SOURCE.</p><p>As many attributes as possible of the copied files are preserved (this depends on the Python implementation).</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.def"><header><h1><span class="syntax-text">def</span></h1><p>Defines a symbol</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">def TYPE SYMBOL-NAME = VALUE</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">TYPE, VALUE</span></dt><dd><table><tr><th>TYPE</th><th>VALUE</th></tr><tr><td><span class="syntax-text">string</span></td><td><span class="syntax-text">(STRING|HERE-DOCUMENT)</span></td></tr><tr><td><span class="syntax-text">list</span></td><td><span class="syntax-text">[ELEMENT]...</span></td></tr><tr><td><span class="syntax-text">path</span></td><td><span class="syntax-text">PATH</span></td></tr><tr><td><span class="syntax-text">integer-matcher</span></td><td><span class="syntax-text">INTEGER-MATCHER</span></td></tr><tr><td><span class="syntax-text">line-matcher</span></td><td><span class="syntax-text">LINE-MATCHER</span></td></tr><tr><td><span class="syntax-text">file-matcher</span></td><td><span class="syntax-text">FILE-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-matcher</span></td><td><span class="syntax-text">FILES-MATCHER</span></td></tr><tr><td><span class="syntax-text">string-matcher</span></td><td><span class="syntax-text">STRING-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-condition</span></td><td><span class="syntax-text">FILES-CONDITION</span></td></tr><tr><td><span class="syntax-text">string-transformer</span></td><td><span class="syntax-text">STRING-TRANSFORMER</span></td></tr><tr><td><span class="syntax-text">program</span></td><td><span class="syntax-text">PROGRAM</span></td></tr></table></dd><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr><tr><td><span class="syntax-text">-rel SYMBOL-NAME</span></td><td>value of path symbol</td></tr><tr><td><span class="syntax-text">-rel-here</span></td><td>location of the current source file</td></tr></table><p>Note: When a PATH value is defined to be relative the "current directory", it means that it is relative the directory that is current when the symbol is REFERENCED,<br>not when it is defined.</p></dd><dt><span class="syntax-text">STRING</span></dt><dd><p>A single word, or a single quoted text.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>A combination of alphanumeric characters and underscores.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>SYMBOL-NAME must not have been defined earlier.</p><p>The defined symbol is available in all following instructions and phases.</p><p>In the "assert" phase, this instruction is mostly useful as a helper for writing assertions. The instruction is not an assertion on its own.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.concept.type">Concept "type"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.HERE-DOCUMENT">Syntax element "HERE-DOCUMENT"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.dir"><header><h1><span class="syntax-text">dir</span></h1><p>Creates a directory</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">dir PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>NOTES</h1></header><p>Intermediate directories as created, if required.</p><p>If the directory already exists, nothing is done.</p><p>In the "assert" phase, this instruction is mostly useful as a helper for writing assertions. The instruction is not an assertion on its own.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.env"><header><h1><span class="syntax-text">env</span></h1><p>Manipulates environment variables</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">env NAME = STRING</span></dt><dd><p>Sets the environment variable NAME to STRING.</p><p>Elements of the form "${var_name}" in STRING, will be replaced with the value of the environment variable "var_name", or the empty string, if there is no environment variable with that name.</p></dd><dt><span class="syntax-text">env unset NAME</span></dt><dd><p>Removes the environment variable NAME.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>The manipulation affects all following phases.</p><p>In the "assert" phase, this instruction is mostly useful as a helper for writing assertions. The instruction is not an assertion on its own.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.assert.file"><header><h1><span class="syntax-text">file</span></h1><p>Creates a file</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">file PATH</span></dt><dd><p>Creates an empty file.</p></dd><dt><span class="syntax-text">file PATH = STRING-SOURCE</span></dt><dd><p>Creates a file with contents given by STRING-SOURCE.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.STRING-SOURCE">Syntax element "STRING-SOURCE"</a></li></ul></section></article></section></section><section class="toc" id="custom.test-case.instructions.cleanup"><header><h3><span class="syntax-text">[cleanup]</span></h3></header><p>The instructions in the "cleanup" phase.</p><article class="instruction toc" id="test-case.instruction.cleanup.$"><header><h1><span class="syntax-text">$</span></h1><p>Executes a command using the current operating system's shell</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">$ SHELL-COMMAND-LINE</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if SHELL-COMMAND-LINE exits with a non-zero exit code.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.SHELL-COMMAND-LINE">Syntax element "SHELL-COMMAND-LINE"</a></li><li><a href="#test-case.instruction.cleanup.run">Instruction "run" (in phase [cleanup])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.%"><header><h1><span class="syntax-text">%</span></h1><p>Runs a program installed on the current system (in the OS PATH)</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">% STRING [PROGRAM-ARGUMENT]...</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if the program exits with a non-zero exit code.</p></section><section><header><h1>NOTES</h1></header><p>If stdin must be supplied, or the exit code should be ignored, then use the "run" instruction.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT">Syntax element "PROGRAM-ARGUMENT"</a></li><li><a href="#test-case.instruction.cleanup.run">Instruction "run" (in phase [cleanup])</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.cd"><header><h1><span class="syntax-text">cd</span></h1><p>Sets the "current directory"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">cd PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.copy"><header><h1><span class="syntax-text">copy</span></h1><p>Copies files and directories into the "sandbox directory structure"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">copy SOURCE [DESTINATION]</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">SOURCE</span></dt><dd><p>The PATH of an existing file or directory.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd><dt><span class="syntax-text">DESTINATION</span></dt><dd><p>The PATH of an existing directory, or a non-existing path.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>DESCRIPTION</h1></header><ul><li>If DESTINATION is not given<p>SOURCE is installed in the "current directory", as a file/directory with the basename of SOURCE.</p></li><li>If DESTINATION is given, but does not exist<p>SOURCE is copied as a file/directory with the path of DESTINATION<br>(the basename of SOURCE is not preserved).</p><p>Intermediate directories as created, if required.</p></li><li>If DESTINATION does exist<p>it must be a directory, and SOURCE is copied into that directory, as a file/directory with the basename of SOURCE.</p></li></ul></section><section><header><h1>NOTES</h1></header><p>If given, DESTINATION must appear on the same line as SOURCE.</p><p>As many attributes as possible of the copied files are preserved (this depends on the Python implementation).</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.def"><header><h1><span class="syntax-text">def</span></h1><p>Defines a symbol</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">def TYPE SYMBOL-NAME = VALUE</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">TYPE, VALUE</span></dt><dd><table><tr><th>TYPE</th><th>VALUE</th></tr><tr><td><span class="syntax-text">string</span></td><td><span class="syntax-text">(STRING|HERE-DOCUMENT)</span></td></tr><tr><td><span class="syntax-text">list</span></td><td><span class="syntax-text">[ELEMENT]...</span></td></tr><tr><td><span class="syntax-text">path</span></td><td><span class="syntax-text">PATH</span></td></tr><tr><td><span class="syntax-text">integer-matcher</span></td><td><span class="syntax-text">INTEGER-MATCHER</span></td></tr><tr><td><span class="syntax-text">line-matcher</span></td><td><span class="syntax-text">LINE-MATCHER</span></td></tr><tr><td><span class="syntax-text">file-matcher</span></td><td><span class="syntax-text">FILE-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-matcher</span></td><td><span class="syntax-text">FILES-MATCHER</span></td></tr><tr><td><span class="syntax-text">string-matcher</span></td><td><span class="syntax-text">STRING-MATCHER</span></td></tr><tr><td><span class="syntax-text">files-condition</span></td><td><span class="syntax-text">FILES-CONDITION</span></td></tr><tr><td><span class="syntax-text">string-transformer</span></td><td><span class="syntax-text">STRING-TRANSFORMER</span></td></tr><tr><td><span class="syntax-text">program</span></td><td><span class="syntax-text">PROGRAM</span></td></tr></table></dd><dt><span class="syntax-text">PATH</span></dt><dd><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr><tr><td><span class="syntax-text">-rel SYMBOL-NAME</span></td><td>value of path symbol</td></tr><tr><td><span class="syntax-text">-rel-here</span></td><td>location of the current source file</td></tr></table><p>Note: When a PATH value is defined to be relative the "current directory", it means that it is relative the directory that is current when the symbol is REFERENCED,<br>not when it is defined.</p></dd><dt><span class="syntax-text">STRING</span></dt><dd><p>A single word, or a single quoted text.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>A combination of alphanumeric characters and underscores.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>SYMBOL-NAME must not have been defined earlier.</p><p>The defined symbol is available in all following instructions and phases.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.concept.type">Concept "type"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.HERE-DOCUMENT">Syntax element "HERE-DOCUMENT"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.dir"><header><h1><span class="syntax-text">dir</span></h1><p>Creates a directory</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">dir PATH</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>NOTES</h1></header><p>Intermediate directories as created, if required.</p><p>If the directory already exists, nothing is done.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.env"><header><h1><span class="syntax-text">env</span></h1><p>Manipulates environment variables</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">env NAME = STRING</span></dt><dd><p>Sets the environment variable NAME to STRING.</p><p>Elements of the form "${var_name}" in STRING, will be replaced with the value of the environment variable "var_name", or the empty string, if there is no environment variable with that name.</p></dd><dt><span class="syntax-text">env unset NAME</span></dt><dd><p>Removes the environment variable NAME.</p></dd></dl></section><section><header><h1>NOTES</h1></header><p>The manipulation affects all following phases.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.file"><header><h1><span class="syntax-text">file</span></h1><p>Creates a file</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">file PATH</span></dt><dd><p>Creates an empty file.</p></dd><dt><span class="syntax-text">file PATH = STRING-SOURCE</span></dt><dd><p>Creates a file with contents given by STRING-SOURCE.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of a non-existing file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.STRING-SOURCE">Syntax element "STRING-SOURCE"</a></li></ul></section></article><article class="instruction toc" id="test-case.instruction.cleanup.run"><header><h1><span class="syntax-text">run</span></h1><p>Runs a "program"</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">run [-ignore-exit-code] PROGRAM</span></dt></dl></section><section><header><h1>OUTCOME</h1></header><p>The result is HARD_ERROR if the exit code is non-zero, unless -ignore-exit-code is given.</p></section><section><header><h1>NOTES</h1></header><p>The program must terminate.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.type.program">Type "program"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li></ul></section></article></section></section></section><section class="toc" id="custom.test-suite"><header><h1>Test Suites</h1></header><section class="toc" id="help-part.TEST_SUITE_SPEC"><header><h2>Specification of test suite functionality</h2></header><section class="toc" id="custom.test-suite.spec.introduction"><header><h3>Introduction</h3></header><p>A test suite is written as a plain text file:</p><pre>[cases]

a.case
group-dir/*.case

[suites]

sub-suite.suite
sub-dir/*.suite
</pre><p>If the file 'example.suite' contains this text, then Exactly can execute it:</p><pre>&gt; exactly suite example.suite
...
OK
</pre><p>A suite file can have any name - Exactly does not put any restriction on file names.</p></section><section class="toc" id="custom.test-suite.spec.structure"><header><h3>Structure</h3></header><p>A suite is made up of "sections".</p><p>Some sections correspond to test case "phases".</p><p>All sections are optional.</p><section class="toc" id="custom.test-suite.spec.structure.cases-and-sub-suites"><header><h4>Test cases and sub suites</h4></header><p>A test suite contains test cases and sub suites.</p><p>These are specified in sections:</p><dl><dt><a href="#test-suite.section.cases"><span class="syntax-text">[cases]</span></a></dt><dd><p>Lists the test cases that are part of the suite.</p><p>This is the default section.</p></dd><dt><a href="#test-suite.section.suites"><span class="syntax-text">[suites]</span></a></dt><dd><p>Lists test suites (sub suites) that are part of the suite.</p></dd></dl></section><section class="toc" id="custom.test-suite.spec.structure.common-test-case-contents"><header><h4>Common test case contents</h4></header><p>A test suite has a section corresponding to every test case phase.</p><p>These sections specify test case contents that is common to all cases in the suite.<br>The contents is included in every test case in the suite.</p><p>Note that the contents is only included in test cases listed directly in the suite - not in sub suites.<br>The reason for this is that it should be easy to run a test case standalone, and Exactly has no functionality for looking up the ultimate root suite that a test case belongs to.</p><p>Sections:</p><dl><dt><a href="#test-suite.section.conf"><span class="syntax-text">[conf]</span></a></dt><dd><p>Common configuration, for all test cases in the suite</p></dd><dt><a href="#test-suite.section.setup"><span class="syntax-text">[setup]</span></a></dt><dd><p>Common contents of the "setup" phase, for all test cases in the suite</p></dd><dt><a href="#test-suite.section.act"><span class="syntax-text">[act]</span></a></dt><dd><p>Common contents of the "act" phase, for all test cases in the suite</p></dd><dt><a href="#test-suite.section.before-assert"><span class="syntax-text">[before-assert]</span></a></dt><dd><p>Common contents of the "before-assert" phase, for all test cases in the suite</p></dd><dt><a href="#test-suite.section.assert"><span class="syntax-text">[assert]</span></a></dt><dd><p>Common contents of the "assert" phase, for all test cases in the suite</p></dd><dt><a href="#test-suite.section.cleanup"><span class="syntax-text">[cleanup]</span></a></dt><dd><p>Common contents of the "cleanup" phase, for all test cases in the suite</p></dd></dl></section><section class="toc" id="custom.test-suite.spec.structure.additional-test-case-conf"><header><h4>Additional test case configuration</h4></header><p>The "conf" section has additional configuration possibilities, compared to those of the "conf" test case phase.</p></section></section><section class="toc" id="custom.test-suite.spec.file-syntax"><header><h3>File syntax</h3></header><p>Syntax is line oriented.</p><p>"[NAME]" on a single line declares the start of section "NAME".</p><p>The order of sections is irrelevant.</p><p>A section may appear any number of times. The contents of all appearances are accumulated.</p><p>Empty lines, and lines beginning with "#" are ignored, unless part of an instruction.</p></section><section class="toc" id="custom.test-suite.spec.outcome"><header><h3>Outcome</h3></header><section class="toc" id="custom.test-suite.spec.outcome.reporting"><header><h4>Reporting</h4></header><p>Outcome is reported via an exit code and stdout.<br>stderr may contain helpful information.</p><p>Output on stdout is handled by the selected "suite reporter".<br>The "suite reporter" also handles the exit code, in some scenarios.</p><section><header><h5>See also</h5></header><ul><li><a href="#entity.concept.suite-reporter">Concept "suite reporter"</a></li></ul></section></section><section class="toc" id="custom.test-suite.spec.outcome.scenarios"><header><h4>Scenarios</h4></header><ul><li>Invalid command line arguments<p>Invalid argument or an argument that denotes a non-existing file.</p><table><tr><th>Exit code</th><td>64</td></tr><tr><th>stdout</th><td>empty</td></tr></table></li><li>Invalid suite<p>Syntax error in a suite file, or a reference to a non-existing case or sub-suite file.</p><table><tr><th>Exit code</th><td>3</td></tr><tr><th>stdout</th><td>Depends on the selected "suite reporter"</td></tr></table></li><li>Complete execution<p>The suite has been executed.<br>Individual test cases may have failed, or may not be executable (due to syntax error, e.g.).</p><table><tr><th>Exit code</th><td>Depends on the selected "suite reporter"</td></tr><tr><th>stdout</th><td>Depends on the selected "suite reporter"</td></tr></table></li></ul></section></section></section><section class="toc" id="custom.test-suite.sections"><header><h2>Sections</h2></header><section class="toc" id="custom.test-suite.sections.cases-and-sub-suites"><header><h3>Test cases and sub suites</h3></header><article class="section toc" id="test-suite.section.cases"><header><h1><span class="syntax-text">[cases]</span></h1><p>Lists the test cases that are part of the suite.</p></header><p>This is the default section.</p><section><header><h1>Contents</h1></header><p>Each line specifies zero or more test cases to include in the suite, by giving the names of files that contain individual test cases.</p><p>File names are relative the location of the test suite file.</p><p>A test case file can have any name - Exactly does not put any restriction on file names.</p><p>Each line consists of a single file name glob pattern.<br>E.g.:</p><pre>file.case
*.case
**/the.case
**/test-cases/*.case
</pre></section></article><article class="section toc" id="test-suite.section.suites"><header><h1><span class="syntax-text">[suites]</span></h1><p>Lists test suites (sub suites) that are part of the suite.</p></header><section><header><h1>Contents</h1></header><p>Each line specifies zero or more test suites to include in the suite, by giving the names of files that contain individual test suites.</p><p>File names are relative the location of the test suite file.</p><p>A test suite file can have any name - Exactly does not put any restriction on file names.</p><p>Each line consists of a single file name glob pattern.<br>E.g.:</p><pre>file.suite
*.suite
**/the.suite
**/test-suites/*.suite
</pre><section><header><h2>Default suite file</h2></header><p>A directory serves as a suite file, if it contains the default suite file "exactly.suite" (which must be a test suite).</p></section></section></article></section><section class="toc" id="custom.test-suite.sections.common-case-contents"><header><h3>Common test case contents and configuration</h3></header><article class="section toc" id="test-suite.section.conf"><header><h1><span class="syntax-text">[conf]</span></h1><p>Common configuration, for all test cases in the suite</p></header><p>Corresponds to the [conf] test case phase, with additional configuration possibilities.</p><p>The section contents is included before the contents of the "conf" phase of each test case.</p><section><header><h1>Contents</h1></header><p>Sequence of instructions - same as the [conf] test case phase.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.conf">Phase [conf]</a></li></ul></section><section><header><h1>Additional instructions</h1></header><table><tr><td><a href="#test-suite.instruction.conf.preprocessor"><span class="syntax-text">preprocessor</span></a></td><td>Sets a "preprocessor" to transform each test case file in the suite</td></tr></table></section></article><article class="section toc" id="test-suite.section.setup"><header><h1><span class="syntax-text">[setup]</span></h1><p>Common contents of the "setup" phase, for all test cases in the suite</p></header><p>Corresponds to the [setup] test case phase.</p><p>The section contents is included before the contents of the "setup" phase of each test case.</p><section><header><h1>Contents</h1></header><p>Identical to contents of the [setup] test case phase.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.setup">Phase [setup]</a></li></ul></section></article><article class="section toc" id="test-suite.section.act"><header><h1><span class="syntax-text">[act]</span></h1><p>Common contents of the "act" phase, for all test cases in the suite</p></header><p>Corresponds to the [act] test case phase.</p><p>The section contents is included before the contents of the "act" phase of each test case.</p><section><header><h1>Contents</h1></header><p>Identical to contents of the [act] test case phase.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.act">Phase [act]</a></li></ul></section></article><article class="section toc" id="test-suite.section.before-assert"><header><h1><span class="syntax-text">[before-assert]</span></h1><p>Common contents of the "before-assert" phase, for all test cases in the suite</p></header><p>Corresponds to the [before-assert] test case phase.</p><p>The section contents is included before the contents of the "before-assert" phase of each test case.</p><section><header><h1>Contents</h1></header><p>Identical to contents of the [before-assert] test case phase.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.before-assert">Phase [before-assert]</a></li></ul></section></article><article class="section toc" id="test-suite.section.assert"><header><h1><span class="syntax-text">[assert]</span></h1><p>Common contents of the "assert" phase, for all test cases in the suite</p></header><p>Corresponds to the [assert] test case phase.</p><p>The section contents is included before the contents of the "assert" phase of each test case.</p><section><header><h1>Contents</h1></header><p>Identical to contents of the [assert] test case phase.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.assert">Phase [assert]</a></li></ul></section></article><article class="section toc" id="test-suite.section.cleanup"><header><h1><span class="syntax-text">[cleanup]</span></h1><p>Common contents of the "cleanup" phase, for all test cases in the suite</p></header><p>Corresponds to the [cleanup] test case phase.</p><p>The section contents is included after the contents of the "cleanup" phase of each test case.</p><section><header><h1>Contents</h1></header><p>Identical to contents of the [cleanup] test case phase.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.cleanup">Phase [cleanup]</a></li></ul></section></article></section></section><section class="toc" id="custom.test-suite.reporters"><header><h2>Suite reporters</h2></header><article class="entity reporter toc" id="entity.reporter.junit"><header><h1><span class="syntax-text">junit</span></h1><p>Outputs JUnit XML.</p></header><section><header><h1>Output syntax</h1></header><p>https://github.com/windyroad/JUnit-Schema/<br>as of 2016-11-14.</p><p>A suite with sub suites is reported as a 'testsuites' element.</p><p>A suite without sub suites is reported as a 'testsuite' element.</p></section><section><header><h1>Exit code</h1></header><p>Unconditionally 0.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.suite-reporter">Concept "suite reporter"</a></li><li><a href="https://github.com/windyroad/JUnit-Schema/">Windy Road JUnit XSD</a></li></ul></section></article><article class="entity reporter toc" id="entity.reporter.progress"><header><h1><span class="syntax-text">progress</span></h1><p>Reports execution progress in a human readable form.</p></header><p>This is the default "suite reporter".</p><section><header><h1>Output syntax</h1></header><p>Reports one event per line:</p><ul><li>beginning of test suite</li><li>execution of test case</li><li>end of test suite</li></ul><p>Beginning and end of test suites wraps the test cases that are contained directly in the test suite (i.e. it does not wrap test cases that are contained in sub suites).</p><p>Last line is an exit identifier, that depends on the outcome of the suite, and is related to the exit code.<br>A summary is printed on stderr.</p></section><section><header><h1>Exit code</h1></header><p>Exit codes, and corresponding exit identifiers printed as the last line of stdout:</p><table><tr><th>Exit code</th><th>Exit identifier</th><th>When</th></tr><tr><td>0</td><td><span class="syntax-text">OK</span></td><td>All test cases could be executed, and result was one of PASS, SKIPPED, XFAIL.</td></tr><tr><td>4</td><td><span class="syntax-text">ERROR</span></td><td>At least one test case could not be executed, or was executed with a result other than those above: FAIL, HARD_ERROR, INTERNAL_ERROR, SYNTAX_ERROR, VALIDATION_ERROR, XPASS.</td></tr><tr><td>3</td><td><span class="syntax-text">INVALID_SUITE</span></td><td>There was an error reading the test suite.<br>No test cases have been executed.</td></tr></table></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.suite-reporter">Concept "suite reporter"</a></li></ul></section></article></section><section class="toc" id="custom.test-suite.instructions"><header><h2>Instructions per section</h2></header><section class="toc" id="custom.test-suite.instructions.conf"><header><h3><span class="syntax-text">[conf]</span></h3></header><p>The instructions in the "conf" section.</p><article class="instruction toc" id="test-suite.instruction.conf.preprocessor"><header><h1><span class="syntax-text">preprocessor</span></h1><p>Sets a "preprocessor" to transform each test case file in the suite</p></header><section><header><h1>SYNOPSIS</h1></header><dl><dt><span class="syntax-text">preprocessor = COMMAND-LINE</span></dt></dl></section><section><header><h1>DESCRIPTION</h1></header><p>The "preprocessor" is only used for the test cases in the current suite - not in sub suites.</p><p>COMMAND-LINE is a command line (with optional arguments), using Unix shell syntax.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.concept.preprocessor">Concept "preprocessor"</a></li><li><a href="#entity.concept.shell-syntax">Concept "shell syntax"</a></li></ul></section></article></section></section></section><section class="toc" id="custom.concept"><header><h1>Concepts</h1></header><article class="concept entity toc" id="entity.concept.action-to-check"><header><h1>action to check</h1><p>The action that is executed in the "act" phase.</p></header><section><header><h1>Description</h1></header><p>The "action to check" (ATC) is specified jointly by the configured "actor" and the contents of the "act" phase.</p><p>It is executed as an OS process.</p><p>Depending on which "actor" is configured, the ATC may be, for example:</p><ul><li>executable program (with arguments)</li><li>source code file</li><li>source code</li><li>shell command</li></ul></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#entity.confparam.actor">Configuration parameter "actor"</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.actor"><header><h1>actor</h1><p>Resolves the "action to check" by reading the contents of the "act" phase.</p></header><section><header><h1>Description</h1></header><p>The "actor" concept makes it possible to have different kind of actions executed in the "act" phase.<br>For example:</p><ul><li>executable program file</li><li>source code file</li><li>source code</li><li>shell command</li></ul><p>An actor determines the syntax and semantics of the "act" phase contents.</p><p>A test case uses a single actor.</p><p>Default actor is: "command line" - Executes a command line, in terms of a PROGRAM.</p><p>If the contents of [act] is empty, or consists of only whitespace and comment lines, then the "null" actor is used.</p><p>Other actors are configured via the "actor" configuration parameter, or the command line option "--actor".</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#entity.confparam.actor">Configuration parameter "actor"</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li><li><a href="#help-part.TEST_CASE_CLI">Test case CLI</a></li><li><a href="#entity.syntax.ACT-INTERPRETER">Syntax element "ACT-INTERPRETER"</a></li><li><a href="#entity.actor.command-line">Actor "command line"</a></li><li><a href="#entity.actor.file-interpreter">Actor "file interpreter"</a></li><li><a href="#entity.actor.source-interpreter">Actor "source interpreter"</a></li><li><a href="#entity.actor.null">Actor "null"</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.configuration-parameter"><header><h1>configuration parameter</h1><p>A value set in the "conf" phase that determine how the remaining phases are executed.</p></header><section><header><h1>Description</h1></header><dl><dt><a href="#entity.confparam.act-home"><span class="syntax-text">act-home</span></a></dt><dd><p>Default location of files referenced from "act" phase, that should probably not be modified.</p></dd><dt><a href="#entity.confparam.actor"><span class="syntax-text">actor</span></a></dt><dd><p>Resolves the "action to check" by reading the contents of the "act" phase.</p></dd><dt><a href="#entity.confparam.home"><span class="syntax-text">home</span></a></dt><dd><p>Default location of persistent helper files, that should probably not be modified.</p></dd><dt><a href="#entity.confparam.status"><span class="syntax-text">status</span></a></dt><dd><p>The status of the test case - if it is expected to PASS or FAIL, or should be skipped.</p></dd><dt><a href="#entity.confparam.timeout"><span class="syntax-text">timeout</span></a></dt><dd><p>Timeout of sub processes executed by instructions and the "act" phase.</p></dd></dl></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.phase.conf">Phase [conf]</a></li><li><a href="#test-suite.section.conf">Suite section [conf]</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.current-directory"><header><h1>current directory</h1><p>The current directory of the environment in which instruction and OS processes are executed.</p></header><section><header><h1>Description</h1></header><p>During the execution of a test case, there is a "current directory" (CD).<br>It is initialized to the act/ sub directory of the "sandbox directory structure".</p><p>The CD is the same for all instructions and phases, unless changed by the "cd" instruction.<br>A change of CD stay in effect for all following instructions and phases.</p><section><header><h2>Using the "current directory"</h2></header><p>Instruction arguments of type "path" that are relative to the CD (via the "-rel-cd" option).</p><p>OS processes executed from within a test case have the CD as Present Working Directory (PWD) when the process starts.<br>This applies to the [act] phase (as a whole), and the "run" and "$" instructions.<br>The [act] phase is always executed as a single OS process execution.</p><p>Change of PWD in a process do not change the CD of following instructions and phases.</p></section><section><header><h2>"def" instruction</h2></header><p>The "def" is special because a "symbol" definition is evaluated each time it is referenced - not when it is defined (i.e. not when the "def" instruction is executed).</p><p>This means, that when a path "symbol" is defined with a relativity of "current directory" ("-rel-cd") it is relative the directory that is current when the symbol is REFERENCED,<br>not when it is defined.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.type.path">Type "path"</a></li><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#test-case.instruction.setup.def">Instruction "def" (in phase [setup])</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.directive"><header><h1>directive</h1><p>Processing during file reading and syntax checking.</p></header><section><header><h1>Description</h1></header><p>A directive is processed during file reading and syntax checking.<br>Nothing happens at later processing steps - i.e. unlike instructions, there is no execution.</p><p>A consequence of this is that symbols cannot be used.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.directive.including">Directive "including"</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.environment-variable"><header><h1>environment variable</h1><p>OS environment variables available to processes executed from within a test case.</p></header><section><header><h1>Description</h1></header><p>All OS environment variables that are set when Exactly is started are available in processes run from a test case.</p><p>Environment variables can be manipulated by the "env" instruction, in many phases.</p><p>A change of environment variables stay in effect for all following instructions and phases.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.instruction.setup.env">Instruction "env" (in phase [setup])</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.home-directory-structure"><header><h1>home directory structure</h1><p>A set of persistent directories for files used by every execution of a test case.</p></header><section><header><h1>Description</h1></header><p>The directories in the "home directory structure" (HDS) exist before the test case is executed. They contain files read by, but not modified by, the test case.</p><p>Exactly prevents modification of the contents of these directories, by preventing them from being used by modification operations.</p><p>Note: Exactly cannot prevent an external program from modifying their contents.</p><section><header><h2>Configuration parameters</h2></header><p>Each of these directories can be set in [conf], since they are "configuration parameters".<br>They cannot be set after [conf].</p></section><section><header><h2>Relative paths</h2></header><p>PATH values have an option for referring to each of these directories.</p></section><section><header><h2>Builtin symbols</h2></header><p>There is a builtin PATH "symbol" for each of these directories.</p></section><section><header><h2>Directories</h2></header><dl><dt>act-home directory</dt><dd><p>Default location of files referenced from "act" phase, that should probably not be modified.</p><table><tr><th>Default value</th><td>The directory where the test case file is located.</td></tr><tr><th>Configuration parameter</th><td><span class="syntax-text">act-home</span></td></tr><tr><th>Set by instruction</th><td><span class="syntax-text">act-home</span></td></tr><tr><th>Builtin symbol</th><td><span class="syntax-text">EXACTLY_ACT_HOME</span></td></tr><tr><th>Path relativity option</th><td><span class="syntax-text">-rel-act-home</span></td></tr></table></dd><dt>home directory</dt><dd><p>Default location of persistent helper files, that should probably not be modified.</p><table><tr><th>Default value</th><td>The directory where the test case file is located.</td></tr><tr><th>Configuration parameter</th><td><span class="syntax-text">home</span></td></tr><tr><th>Set by instruction</th><td><span class="syntax-text">home</span></td></tr><tr><th>Builtin symbol</th><td><span class="syntax-text">EXACTLY_HOME</span></td></tr><tr><th>Path relativity option</th><td><span class="syntax-text">-rel-home</span></td></tr></table></dd></dl></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.test-case-directory-structure">Concept "test case directory structure"</a></li><li><a href="#entity.concept.configuration-parameter">Concept "configuration parameter"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.type.path">Type "path"</a></li><li><a href="#entity.confparam.act-home">Configuration parameter "act-home"</a></li><li><a href="#entity.confparam.home">Configuration parameter "home"</a></li><li><a href="#test-case.instruction.conf.act-home">Instruction "act-home" (in phase [conf])</a></li><li><a href="#test-case.instruction.conf.home">Instruction "home" (in phase [conf])</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.instruction"><header><h1>instruction</h1><p>The building block of all phases except [act].</p></header><section><header><h1>Description</h1></header><p>All phases except [act] is a sequence of "instructions", zero or more.</p><p>Executing a phase means executing all instructions in the phase, in the order they appear in the test case source file.</p><p>Each phase has its own instruction set.</p><section><header><h2>Semantics</h2></header><p>In [assert], instructions serve as assertions by representing boolean expressions.<br>E.g. asserting that the action to check did not output anything to stdout:</p><pre>stdout empty
</pre><p>In all other phases, and also for some of the instructions in [assert], the purpose of an instruction is its side effects for setting up the execution environment of [act], [assert], or cleaning up after the test ([cleanup]).<br>E.g. creating a file:</p><pre>file my-file.txt = "contents of my file"
</pre></section><section><header><h2>Syntax</h2></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">PROPERTY = VALUE</span></dt><dd><p>For example:</p><pre>timeout = 10

stdin   = "contents of stdin"
</pre></dd><dt><span class="syntax-text">INSTRUCTION-NAME ARGUMENT...</span></dt><dd><p>For example:</p><pre>file my-file.txt = "contents of my file"

run % python -c :&gt; import sys; sys.stdout.write("Hello world")
</pre></dd></dl><p>An instruction starts on a new line, beginning with the name of the instruction, followed by arguments.</p><p>Each instruction has its own syntax for arguments.<br>Most common syntax is that of options and arguments resembling the Unix shell command line interface.<br>One difference though, is that the order of options is usually significant.</p><p>Some instructions may span multiple lines, while some must use only a single line.<br>The syntax is not always consistent.</p><p>Most arguments are values of one of Exactly's type system, and thus use a common syntax.</p><p>Arguments may refer to symbols defined by the "def" instruction.</p><p>Comments may not appear inside instructions.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.type">Concept "type"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.preprocessor"><header><h1>preprocessor</h1><p>A command line that transforms a test case file as the first step of processing it</p></header><section><header><h1>Description</h1></header><p>A "preprocessor" is a command line (with optional arguments), using Unix shell syntax.</p><p>When executed, it is given a single (additional) argument: the path of the test case file to transform.</p><p>The result of the transformation is the output on stdout.</p><p>An exit code other than 0 indicates error.</p><p>A test case file is preprocessed only if a "preprocessor" is given via the "--preprocessor" option, or via a test suite.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.shell-syntax">Concept "shell syntax"</a></li><li><a href="#test-suite.instruction.conf.preprocessor">Suite instruction "preprocessor" (in section [conf])</a></li><li><a href="#help-part.TEST_CASE_CLI">Test case CLI</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.sandbox-directory-structure"><header><h1>sandbox directory structure</h1><p>A set of temporary directories used by a single execution of a test case. One of them is the initial "current directory".</p></header><section><header><h1>Description</h1></header><p>Each execution of a test case uses its own "sandbox directory structure" (SDS).</p><p>It is created in a platform dependent location for temporary files.</p><p>The SDS is created just before the "setup" phase is executed (after validation) and deleted when test case execution ends (unless "--keep" is used).</p><p>The SDS is used to store temporary files used by instructions (among other things). One such example is output from external processes - stdout and stderr. Thus, the SDS must have enough space to store the output from all such executed processes.</p><section><header><h2>Directory structure</h2></header><ul><li><span class="syntax-text">act/</span></li><li><span class="syntax-text">tmp/</span></li><li><span class="syntax-text">result/</span></li><li><span class="syntax-text">internal/</span><ul><li><span class="syntax-text">tmp/</span></li><li><span class="syntax-text">log/</span></li></ul></li></ul></section><section><header><h2><span class="syntax-text">act/</span></h2></header><p>The current directory when [setup] begins.</p><p>It will be the "current directory" for the "act" phase, and following phases, unless it is changed by the "cd" instruction.</p><p>(Files and directories that [setup] creates are installed into the "current directory", if no instruction options are used to change this.)</p><table><tr><th><span class="syntax-text">EXACTLY_ACT</span></th><td>The value of this "symbol" is the absolute path of this directory.</td></tr><tr><th><span class="syntax-text">-rel-act</span></th><td>The path relativity option that refers to this directory.</td></tr></table></section><section><header><h2><span class="syntax-text">result/</span></h2></header><p>Stores OS process outcome of [act], so that [assert] may check it.</p><p>This directory is initially empty.<br>It is populated when the "act" phase is executed with the following files (with obvious contents):</p><ul><li><span class="syntax-text">stderr</span></li><li><span class="syntax-text">stdout</span></li><li><span class="syntax-text">exitcode</span></li></ul><table><tr><th><span class="syntax-text">EXACTLY_RESULT</span></th><td>The value of this "symbol"
is the absolute path of this directory
(after the "act" phase has been executed).</td></tr><tr><th><span class="syntax-text">-rel-result</span></th><td>The path relativity option that refers to this directory.</td></tr></table></section><section><header><h2><span class="syntax-text">tmp/</span></h2></header><p>Reserved for custom helper files, used by the test case implementation.</p><p>Exactly does not touch this directory.<br>The test case can use it as a place where it is safe to put temporary files without the risk of name clashes with files from other program.</p><table><tr><th><span class="syntax-text">EXACTLY_TMP</span></th><td>The value of this "symbol" is the absolute path of this directory.</td></tr><tr><th><span class="syntax-text">-rel-tmp</span></th><td>The path relativity option that refers to this directory.</td></tr></table></section><section><header><h2><span class="syntax-text">internal/</span></h2></header><p>Root directory for files that are reserved for Exactly.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.test-case-directory-structure">Concept "test case directory structure"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.type.path">Type "path"</a></li><li><a href="#test-case.instruction.setup.cd">Instruction "cd" (in phase [setup])</a></li><li><a href="#help-part.TEST_CASE_CLI">Test case CLI</a></li><li><a href="https://docs.python.org/3/library/tempfile.html#tempfile.gettempdir">Platform dependent location of SDS</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.shell-syntax"><header><h1>shell syntax</h1><p>Quoting of strings in command lines.</p></header><section><header><h1>Description</h1></header><p>Quoting according to the "shlex" module of the Python language.</p><p>The syntax resembles that of the Unix shell.</p><p>The "shlex" module is used in POSIX mode.</p></section><section><header><h1>See also</h1></header><ul><li><a href="https://docs.python.org/3/library/shlex.html#parsing-rules">Python shell syntax</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.suite-reporter"><header><h1>suite reporter</h1><p>Reports the outcome of a test suite via stdout, stderr and exit code.</p></header><section><header><h1>Description</h1></header><p>Note that some scenarios are not reported by the "suite reporter", such as invalid command line arguments.<br>See the test suite specification for details.</p><p>The reporter is specified via the command line using the "--reporter" option.</p><p>Default: "progress".</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.reporter.progress">Suite reporter "progress"</a></li><li><a href="#entity.reporter.junit">Suite reporter "junit"</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.symbol"><header><h1>symbol</h1><p>A named constant, with one of the types of Exactly's type system.</p></header><section><header><h1>Description</h1></header><p>A "symbol" corresponds to a named constant, found in most programming languages.</p><p>Every symbol has a type according to Exactly's type system.</p><p>The name of a symbol must be unique within the whole test case - symbol names share a global name space.</p><p>A symbol name (SYMBOL-NAME) is: A combination of alphanumeric characters and underscores.</p><section><header><h2>Definition</h2></header><p>A symbol is defined by the "def" instruction:</p><pre>def string SYMBOL_NAME = "the symbol value"
</pre><p>This defines a symbol SYMBOL_NAME to be the value "the symbol value", which is a value of type "string".</p><p>The type must be given explicitly.<br>For example:</p><pre>def list               LIST_SYMBOL = first second "the third"

def string-transformer REPLACE_ID  = replace [0-9]{10} ID
</pre></section><section><header><h2>Reference</h2></header><p>A symbol must be defined before it is referenced.</p><p>Once defined, a symbol is available to all instructions following the definition - both in the phase where it is defined and in following phases.</p><p>A symbol reference may appear in string and as instruction arguments, in places where an argument of a certain type is expected.<br>Thus, symbols cannot be used for instruction names or arbitrary instruction arguments (as in unix shell scripts, e.g.).</p><p>There are two forms of symbol references:</p><table><tr><th>Plain name</th><td><span class="syntax-text">SYMBOL-NAME</span></td></tr><tr><th>Special syntax</th><td><span class="syntax-text">@[SYMBOL-NAME]@</span></td></tr></table><p>The special syntax is designed to reduce the risk of clashes with the syntax of other programming languages and shell script, e.g.<br>This is important since Exactly has limited capabilities for escaping and quoting.</p><p>Also, strings that resemble the special syntax will not be considered as errors, since it is assumed that these strings might have the syntax needed for a different purpose.<br>For example, the following strings does not constitute "symbol" references, and Exactly will not complain:</p><pre>@[NOT/A_VALID_SYMBOL_NAME]@
@[VALID_SYMBOL_NAME ]@
@[VALID_SYMBOL_NAME]
</pre><p>The plain "symbol" name is used when a "symbol" reference is unambiguous. Otherwise, the special syntax is needed.<br>For example:</p><pre>def string S = "reference to @[SYMBOL_NAME]@"

def list   L = first @[STRING_SYMBOL]@ "third element"

stdout -transformed-by ( filter LINE_MATCHER_SYMBOL ) ! empty

stdout equals -file -rel PATH_SYMBOL @[DIR_NAME_SYMBOL]@/@[BASE_NAME_SYMBOL]@
</pre></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.type">Concept "type"</a></li><li><a href="#test-case.instruction.setup.def">Instruction "def" (in phase [setup])</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.test-case-directory-structure"><header><h1>test case directory structure</h1><p>Persistent and temporary directories used in the execution of a test case.</p></header><section><header><h1>Description</h1></header><p>Consists of two sets of directories:</p><ul><li>Home directory structure<p>A set of persistent directories for files used by every execution of a test case.</p><table><tr><th>act-home directory</th><td>Default location of files referenced from "act" phase, that should probably not be modified.</td></tr><tr><th>home directory</th><td>Default location of persistent helper files, that should probably not be modified.</td></tr></table></li><li>Sandbox directory structure<p>A set of temporary directories used by a single execution of a test case. One of them is the initial "current directory".</p><table><tr><th>act directory</th><td>The current directory when [setup] begins</td></tr><tr><th>result directory</th><td>Stores OS process outcome of [act], so that [assert] may check it</td></tr><tr><th>tmp directory</th><td>Reserved for custom helper files, used by the test case implementation</td></tr></table></li></ul><p>Exactly has support for referring to all of these directories from a test case via the "path" type.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.home-directory-structure">Concept "home directory structure"</a></li><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li></ul></section></article><article class="concept entity toc" id="entity.concept.type"><header><h1>type</h1><p>Type system for symbols and instruction arguments.</p></header><section><header><h1>Description</h1></header><p>Exactly has a type system specialized for test cases.</p><p>Every symbol, and most instruction arguments, have a type.</p><p>There are two categories of types</p><ul><li>Data types<table><tr><th>list</th><td>A sequence of zero or more strings.</td></tr><tr><th>path</th><td>A file path, with special support for directories in the "test case directory structure"</td></tr><tr><th>string</th><td>A sequence of characters.</td></tr></table></li><li>Logic types<table><tr><th>file-matcher</th><td>Matches properties of an existing file - type, name and contents.</td></tr><tr><th>files-condition</th><td>A condition of existence of a set of named files</td></tr><tr><th>files-matcher</th><td>Matches a set of files (e.g. the contents of a directory).</td></tr><tr><th>integer-matcher</th><td>Matches an integer.</td></tr><tr><th>line-matcher</th><td>Matches individual text lines of a string.</td></tr><tr><th>program</th><td>An external program, with optional arguments, and optional transformation of the output.</td></tr><tr><th>string-matcher</th><td>Matches a string (a sequence of new-line separated text lines).</td></tr><tr><th>string-transformer</th><td>Transforms a string (a sequence of new-line separated text lines).</td></tr></table></li></ul><p>A data type values is pure data.</p><p>A logic type values is a pure function.</p><p>Each data type has its own specialized syntax.<br>The logic types have syntax that resembles common syntax of expressions.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.string">Type "string"</a></li><li><a href="#entity.type.list">Type "list"</a></li><li><a href="#entity.type.path">Type "path"</a></li><li><a href="#entity.type.integer-matcher">Type "integer-matcher"</a></li><li><a href="#entity.type.line-matcher">Type "line-matcher"</a></li><li><a href="#entity.type.file-matcher">Type "file-matcher"</a></li><li><a href="#entity.type.files-matcher">Type "files-matcher"</a></li><li><a href="#entity.type.string-matcher">Type "string-matcher"</a></li><li><a href="#entity.type.string-transformer">Type "string-transformer"</a></li><li><a href="#entity.type.files-condition">Type "files-condition"</a></li><li><a href="#entity.type.program">Type "program"</a></li></ul></section></article></section><section class="toc" id="custom.confparam"><header><h1>Configuration parameters</h1></header><article class="confparam entity toc" id="entity.confparam.act-home"><header><h1><span class="syntax-text">act-home</span></h1><p>Default location of files referenced from "act" phase, that should probably not be modified.</p></header><section><header><h1>Default Value</h1></header><p>The directory where the test case file is located.</p></section><section><header><h1>Description</h1></header><p>Instructions and phases may use files that are supposed to exist before the test case is executed.</p><p>E.g., the "act" phase (by default) references an program that is expected to be an executable file.<br>If the path to this file is relative, then it is relative the "act-home".</p><p>The environment variable EXACTLY_ACT_HOME contains the absolute path of this directory.</p><p>The option "-rel-act-home" (accepted by many instructions) refers to this directory.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.instruction.conf.act-home">Instruction "act-home" (in phase [conf])</a></li></ul></section></article><article class="confparam entity toc" id="entity.confparam.actor"><header><h1><span class="syntax-text">actor</span></h1><p>Resolves the "action to check" by reading the contents of the "act" phase.</p></header><section><header><h1>Default Value</h1></header><p>"command line" - Executes a command line, in terms of a PROGRAM</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li><li><a href="#entity.actor.command-line">Actor "command line"</a></li><li><a href="#entity.actor.file-interpreter">Actor "file interpreter"</a></li><li><a href="#entity.actor.source-interpreter">Actor "source interpreter"</a></li><li><a href="#entity.actor.null">Actor "null"</a></li></ul></section></article><article class="confparam entity toc" id="entity.confparam.home"><header><h1><span class="syntax-text">home</span></h1><p>Default location of persistent helper files, that should probably not be modified.</p></header><section><header><h1>Default Value</h1></header><p>The directory where the test case file is located.</p></section><section><header><h1>Description</h1></header><p>Instructions and phases may use predefined input in terms of files that are supposed to exist before the test case is executed.</p><p>Many instructions use exiting files. E.g. for copying them into the sandbox.</p><p>The environment variable EXACTLY_HOME contains the absolute path of this directory.</p><p>The option "-rel-home" (accepted by many instructions) refers to this directory.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.instruction.conf.home">Instruction "home" (in phase [conf])</a></li></ul></section></article><article class="confparam entity toc" id="entity.confparam.status"><header><h1><span class="syntax-text">status</span></h1><p>The status of the test case - if it is expected to PASS or FAIL, or should be skipped.</p></header><section><header><h1>Default Value</h1></header><p><span class="enum-constant syntax-text">PASS</span></p></section><section><header><h1>Description</h1></header><dl><dt><span class="enum-constant syntax-text">PASS</span></dt><dd><p>The test case is executed and the "assert" phase is expected to PASS.</p></dd><dt><span class="enum-constant syntax-text">FAIL</span></dt><dd><p>The test case is executed and the "assert" phase is expected to FAIL.</p><p>Outcome of the test case is XFAIL, if [assert] FAILs.<br>If [assert] PASS, the result is XPASS.</p></dd><dt><span class="enum-constant syntax-text">SKIP</span></dt><dd><p>The test case is not executed.</p><p>Outcome of the test case is SKIPPED.</p></dd></dl></section></article><article class="confparam entity toc" id="entity.confparam.timeout"><header><h1><span class="syntax-text">timeout</span></h1><p>Timeout of sub processes executed by instructions and the "act" phase.</p></header><section><header><h1>Default Value</h1></header><p>No timeout.</p></section><section><header><h1>Description</h1></header><p>The timeout is per instruction, and for the "act" phase. It does not apply to the test case as a whole.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#test-case.instruction.conf.timeout">Instruction "timeout" (in phase [conf])</a></li></ul></section></article></section><section class="toc" id="custom.actor"><header><h1>Actors</h1></header><article class="actor entity toc" id="entity.actor.command-line"><header><h1>command line</h1><p>Executes a command line, in terms of a PROGRAM</p></header><p>This is the default "actor".</p><section><header><h1>"act" phase contents</h1></header><p>A single PROGRAM element.</p><p>Any number of empty lines and comment lines are allowed.</p></section><section><header><h1>Syntax of "act" phase contents</h1></header><p>Comment lines are lines beginning with "#" (optionally preceded by space).</p><section><header><h2>SYNOPSIS</h2></header><dl><dt><span class="syntax-text">PROGRAM</span></dt></dl></section></section><section><header><h1>Notes</h1></header><section><header><h2>Path relativities</h2></header><p>When PROGRAM has the form of the PATH of an executable file:</p><p>Accepted relativities (default is "act-home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></section><section><header><h2>Stdin</h2></header><p>If PROGRAM defines stdin, then the stdin of the OS process is the stdin defined for PROGRAM followed by the stdin set in the "setup" phase.</p></section><section><header><h2>Transformations</h2></header><p>If PROGRAM includes a transformation (via a STRING-TRANSFORMER), then the transformation is applied to stdout of the OS process.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li><li><a href="#entity.confparam.act-home">Configuration parameter "act-home"</a></li><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li></ul></section></article><article class="actor entity toc" id="entity.actor.file-interpreter"><header><h1>file interpreter</h1><p>Executes a source code file using an ACT-INTERPRETER</p></header><section><header><h1>"act" phase contents</h1></header><p>A single line which is a file name followed by optional arguments.</p><p>The file name and arguments are given as arguments to the ACT-INTERPRETER.</p></section><section><header><h1>Syntax of "act" phase contents</h1></header><p>Comment lines are lines beginning with "#" (optionally preceded by space).</p><section><header><h2>SYNOPSIS</h2></header><dl><dt><span class="syntax-text">FILE [PROGRAM-ARGUMENT]...</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">FILE</span></dt><dd><p>The path of an existing source code file.</p><p>Accepted relativities (default is "act-home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li><li><a href="#entity.syntax.ACT-INTERPRETER">Syntax element "ACT-INTERPRETER"</a></li><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT">Syntax element "PROGRAM-ARGUMENT"</a></li></ul></section></article><article class="actor entity toc" id="entity.actor.null"><header><h1>null</h1><p>Ignores the contents of the [act] phase. Exit code is unconditionally 0, and there is no output on neither stdout nor stderr</p></header><p>The null actor is useful when the test case does not test a program, but rather properties of the operating system environment.</p><section><header><h1>"act" phase contents</h1></header><p>Ignored.</p></section><section><header><h1>Syntax of "act" phase contents</h1></header><p>There are no syntax requirements.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li></ul></section></article><article class="actor entity toc" id="entity.actor.source-interpreter"><header><h1>source interpreter</h1><p>Treats the [act] phase as source code to be executed by an ACT-INTERPRETER</p></header><p>The contents of the "act" phase is stored in a file, and the name of this file is given as the last argument to the interpreter.</p><section><header><h1>"act" phase contents</h1></header><p>Source code to be interpreted by the interpreter.</p></section><section><header><h1>Syntax of "act" phase contents</h1></header><p>All lines of the "act" phase are part of the source code.<br>There is no recognition or special handling of comment lines and empty lines.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#test-case.phase.act">Phase [act]</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li><li><a href="#entity.syntax.ACT-INTERPRETER">Syntax element "ACT-INTERPRETER"</a></li></ul></section></article></section><section class="toc" id="custom.type"><header><h1>Types</h1></header><section class="toc" id="custom.type.data-type"><header><h2>Data types</h2></header><article class="entity toc type" id="entity.type.list"><header><h1>list</h1><p>A sequence of zero or more strings.</p></header><section><header><h1>Description</h1></header><p>Used for argument lists, etc.</p><p>Useful when the "action to check" is a program with arguments, and for the "run" instruction, e.g.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.LIST">Syntax element "LIST"</a></li></ul></section></article><article class="entity toc type" id="entity.type.path"><header><h1>path</h1><p>A file path, with special support for directories in the "test case directory structure"</p></header><section><header><h1>Description</h1></header><section><header><h2>Rendering of path values</h2></header><p>All path values are rendered as absolute paths.</p><p>This means, e.g., that values can be passed to external programs, which may use them without consideration of the current directory of the OS process.</p><p>Note: A path value that is defined using the "def" instruction with relativity of "current directory" ("-rel-cd") is evaluated when it is REFERENCED,<br>not when it is defined.</p><p>This means that the rendered value is different if it is referenced in different locations with different "current directory".</p></section></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.concept.test-case-directory-structure">Concept "test case directory structure"</a></li></ul></section></article><article class="entity toc type" id="entity.type.string"><header><h1>string</h1><p>A sequence of characters.</p></header><section><header><h1>Description</h1></header><p>Used for arbitrary string values, and relative file names.</p><p>When used as a relative file name, Posix syntax should be used.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li></ul></section></article></section><section class="toc" id="custom.type.logic-type"><header><h2>Logic types</h2></header><article class="entity toc type" id="entity.type.file-matcher"><header><h1>file-matcher</h1><p>Matches properties of an existing file - type, name and contents.</p></header><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.FILE-MATCHER">Syntax element "FILE-MATCHER"</a></li></ul></section></article><article class="entity toc type" id="entity.type.files-condition"><header><h1>files-condition</h1><p>A condition of existence of a set of named files</p></header><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.FILES-CONDITION">Syntax element "FILES-CONDITION"</a></li></ul></section></article><article class="entity toc type" id="entity.type.files-matcher"><header><h1>files-matcher</h1><p>Matches a set of files (e.g. the contents of a directory).</p></header><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.FILES-MATCHER">Syntax element "FILES-MATCHER"</a></li></ul></section></article><article class="entity toc type" id="entity.type.integer-matcher"><header><h1>integer-matcher</h1><p>Matches an integer.</p></header><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.INTEGER-MATCHER">Syntax element "INTEGER-MATCHER"</a></li></ul></section></article><article class="entity toc type" id="entity.type.line-matcher"><header><h1>line-matcher</h1><p>Matches individual text lines of a string.</p></header><section><header><h1>Description</h1></header><p>The line separator depends on the current OS ('\n', '\r\n', e.g.).</p><p>Line separator are not included in the line contents.</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.LINE-MATCHER">Syntax element "LINE-MATCHER"</a></li></ul></section></article><article class="entity toc type" id="entity.type.program"><header><h1>program</h1><p>An external program, with optional arguments, and optional transformation of the output.</p></header><section><header><h1>Description</h1></header><p>A "program" is executed as an OS process.</p><p>The timeout of the OS process is determined by the "timeout" configuration parameter.</p><p>The environment in which a program is executed is described in "Specification of test case functionality" / "OS process environment".</p></section><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li><li><a href="#entity.confparam.timeout">Configuration parameter "timeout"</a></li><li><a href="#help-part.TEST_CASE_SPEC">Specification of test case functionality</a></li></ul></section></article><article class="entity toc type" id="entity.type.string-matcher"><header><h1>string-matcher</h1><p>Matches a string (a sequence of new-line separated text lines).</p></header><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING-MATCHER">Syntax element "STRING-MATCHER"</a></li></ul></section></article><article class="entity toc type" id="entity.type.string-transformer"><header><h1>string-transformer</h1><p>Transforms a string (a sequence of new-line separated text lines).</p></header><section><header><h1>SEE ALSO</h1></header><ul><li><a href="#entity.syntax.STRING-TRANSFORMER">Syntax element "STRING-TRANSFORMER"</a></li></ul></section></article></section></section><section class="toc" id="custom.syntax"><header><h1>Syntax elements</h1></header><section class="toc" id="custom.syntax.data-type"><header><h2>Data types</h2></header><article class="entity syntax toc" id="entity.syntax.LIST"><header><h1><span class="syntax-text">LIST</span></h1><p>A sequence of zero or more strings.</p></header><dl><dt><span class="syntax-text">[STRING|SYMBOL-REFERENCE]...</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>A reference to a symbol defined as either string, path or list.</p><p>If it is a list, it is concatenated with the surrounding elements - lists cannot be nested.</p></dd></dl><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.type.list">Type "list"</a></li><li><a href="#test-case.instruction.setup.def">Instruction "def" (in phase [setup])</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.PATH"><header><h1><span class="syntax-text">PATH</span></h1><p>A file path, with special support for directories in the "test case directory structure"</p></header><dl><dt><span class="syntax-text">[RELATIVITY] STRING</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">STRING</span></dt><dd><p>A relative or absolute path, using Posix syntax.</p><p>It is a value of type "string", and thus uses STRING syntax.</p></dd><dt><span class="syntax-text">RELATIVITY</span></dt><dd><p>An option that specifies the directory that STRING is relative to.</p><p>The available relativities depends on the instruction, and also on the argument's role in the instruction.</p><p>Summary of options:</p><ul><li>Options for directories in the "home directory structure"<table><tr><th><span class="syntax-text">-rel-home</span></th><td>home directory</td></tr><tr><th><span class="syntax-text">-rel-act-home</span></th><td>act-home directory</td></tr></table></li><li>Options for directories in the "sandbox directory structure"<table><tr><th><span class="syntax-text">-rel-act</span></th><td>act directory</td></tr><tr><th><span class="syntax-text">-rel-tmp</span></th><td>tmp directory</td></tr><tr><th><span class="syntax-text">-rel-result</span></th><td>result directory</td></tr></table></li><li>Option for "current directory"<table><tr><th><span class="syntax-text">-rel-cd</span></th></tr></table><p>This options is needed since many instructions have a default relativity other than the "current directory".</p></li><li>Option for a path denoted by a "symbol"<table><tr><th><span class="syntax-text">-rel SYMBOL-NAME</span></th></tr></table><p>This option is always available.</p></li><li>Option for the location of the current source file<table><tr><th><span class="syntax-text">-rel-here</span></th></tr></table><p>This option is only available when defining a path "symbol" using the "def" instruction.</p></li></ul></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>A "symbol" with type "path".</p></dd></dl><section><header><h1>Description</h1></header><section><header><h2>Relativity</h2></header><p>If STRING is an absolute path, then RELATIVITY must not be given.</p><p>If STRING is a relative path, then if RELATIVITY is ...</p><ul><li>given<p>STRING is relative to the directory specified by RELATIVITY</p></li><li>not given<p>STRING is relative to the default relativity root directory,</p></li></ul><p>The default relativity depends on the instruction, and also on the argument's role in the instruction.</p><section><header><h3>Notes</h3></header><p>If STRING begins with a reference to a "path" "symbol", then it is an absolute path.</p><p>For example:</p><pre>def path MY_PATH_SYMBOL = ...

... @[MY_PATH_SYMBOL]@/a/path/relative/to/MY_PATH_SYMBOL
</pre></section></section><section><header><h2>Rendering of path values</h2></header><p>All path values are rendered as absolute paths.</p><p>This means, e.g., that values can be passed to external programs, which may use them without consideration of the current directory of the OS process.</p><p>Note: A path value that is defined using the "def" instruction with relativity of "current directory" ("-rel-cd") is evaluated when it is REFERENCED,<br>not when it is defined.</p><p>This means that the rendered value is different if it is referenced in different locations with different "current directory".</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.test-case-directory-structure">Concept "test case directory structure"</a></li><li><a href="#entity.concept.current-directory">Concept "current directory"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.type.path">Type "path"</a></li><li><a href="#test-case.instruction.setup.def">Instruction "def" (in phase [setup])</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.STRING"><header><h1><span class="syntax-text">STRING</span></h1><p>A sequence of characters.</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">CHARACTER...</span></dt><dd><p>A "naked" sequence of characters.</p><p>CHARACTER may not be whitespace.</p><p>Any SYMBOL-REFERENCE appearing in the string is substituted.</p></dd><dt><span class="syntax-text">"CHARACTER..."</span></dt><dd><p>Characters surrounded by "soft quotes" (").</p><p>Any SYMBOL-REFERENCE appearing in the string is substituted.</p></dd><dt><span class="syntax-text">'CHARACTER...'</span></dt><dd><p>Characters surrounded by "hard quotes" (').</p><p>Any SYMBOL-REFERENCE appearing in the string is NOT substituted.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>A reference to a "symbol" defined as either "string", "list" or "path".</p><p>An empty "list" value is rendered as an empty string.</p><p>A non-empty "list" value is rendered by separating the elements with a single space.</p><p>A "path" value is rendered as absolute paths (even if relativity is -rel-cd).</p></dd></dl><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li><li><a href="#entity.type.string">Type "string"</a></li><li><a href="#entity.type.list">Type "list"</a></li><li><a href="#entity.type.path">Type "path"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#test-case.instruction.setup.def">Instruction "def" (in phase [setup])</a></li></ul></section></article></section><section class="toc" id="custom.syntax.logic-type"><header><h2>Logic types</h2></header><article class="entity syntax toc" id="entity.syntax.FILE-MATCHER"><header><h1><span class="syntax-text">FILE-MATCHER</span></h1><p>Matches properties of an existing file - type, name and contents.</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">type TYPE</span></dt><dd><p>Matches files who's type is TYPE.</p><p>TYPE is one of:</p><table><tr><td><span class="enum-constant syntax-text">dir</span></td><td>File must be a directory</td></tr><tr><td><span class="enum-constant syntax-text">file</span></td><td>File must be a regular file</td></tr><tr><td><span class="enum-constant syntax-text">symlink</span></td><td>File must be a symbolic link</td></tr></table><p>Symbolic links are followed (unless TYPE is symlink).</p></dd><dt><span class="syntax-text">contents STRING-MATCHER</span></dt><dd><p>Matches regular files who's contents satisfies STRING-MATCHER.</p><p>The result is HARD_ERROR for files are not regular files.<br>Symbolic links are followed.</p><p>Note: STRING-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">dir-contents [DIR-CONTENTS-OPTIONS] FILES-MATCHER</span></dt><dd><p>Matches directories who's contents satisfies FILES-MATCHER.</p><p>The '.' and '..' directory entries are not included in the set of matched files.</p><p>The result is HARD_ERROR for files are not directories.<br>Symbolic links are followed.</p><p>Note: FILES-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">run [PATH-ARGUMENT-POSITION] PROGRAM</span></dt><dd><p>Runs a program, and matches iff its exit code is 0.</p><p>The path of the file to match is given as an argument according to PATH-ARGUMENT-POSITION, if given, or as the last argument, if PATH-ARGUMENT-POSITION is not given.</p><p>Transformations of the output from PROGRAM are ignored.</p></dd><dt><span class="syntax-text">path (GLOB-PATTERN|~ REGEX)</span></dt><dd><p>Matches files who's absolute path matches the given pattern.</p></dd><dt><span class="syntax-text">name (GLOB-PATTERN|~ REGEX)</span></dt><dd><p>Matches files who's final path component (base name) matches the given pattern.</p></dd><dt><span class="syntax-text">stem (GLOB-PATTERN|~ REGEX)</span></dt><dd><p>Matches files who's "stem" part of its name matches the given pattern.</p><p>E.g., the stem of 'a.tar.gz' is 'a'.</p></dd><dt><span class="syntax-text">suffixes (GLOB-PATTERN|~ REGEX)</span></dt><dd><p>Matches files who's "suffixes" part of its name matches the given pattern.</p><p>E.g., the suffixes of 'a.tar.gz' is '.tar.gz'.</p></dd><dt><span class="syntax-text">suffix (GLOB-PATTERN|~ REGEX)</span></dt><dd><p>Matches files who's "suffix" part of its name matches the given pattern.</p><p>E.g., the suffix of 'a.tar.gz' is '.gz'.</p></dd><dt><span class="syntax-text">constant (false|true)</span></dt><dd><p>Unconditionally false or true.</p></dd><dt><span class="syntax-text">! FILE-MATCHER</span></dt><dd><p>Matches files not matched by the given matcher.</p></dd><dt><span class="syntax-text">FILE-MATCHER || FILE-MATCHER</span></dt><dd><p>Matches files matched by any matcher.</p></dd><dt><span class="syntax-text">FILE-MATCHER &amp;&amp; FILE-MATCHER</span></dt><dd><p>Matches files matched by every matcher.</p></dd><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>Reference to a symbol, that must have been defined as a file-matcher.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>Reference to a symbol, that must have been defined as a file-matcher.</p><p>An unquoted string that is not the name of a file-matcher is interpreted as the name of a symbol.</p></dd><dt><span class="syntax-text">( FILE-MATCHER )</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">DIR-CONTENTS-OPTIONS</span></dt><dd><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">-recursive [-min-depth INTEGER] [-max-depth INTEGER]</span></dt><dd><p>Includes sub directory contents (recursively).</p><p>Sub directory contents may be limited by specifying limits for the depth.</p><p>Depth 0 is the direct contents of the tested directory.</p></dd></dl><p>By default, only the direct contents of the tested directory is included - sub directory contents is excluded.</p></dd><dt><span class="syntax-text">PATH-ARGUMENT-POSITION</span></dt><dd><p>Specifies which argument(s) to the program that will be the path of the file.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">-path-arg-last</span></dt><dd><p>The path of the file will be the last argument to PROGRAM.</p></dd><dt><span class="syntax-text">-path-arg-marker MARKER</span></dt><dd><p>The path of the file will replace every argument to PROGRAM that equals MARKER.</p></dd></dl></dd></dl><section><header><h1>Description</h1></header><section><header><h2>File name parts</h2></header><table><tr><th>path</th><th>name</th><th>stem</th><th>suffixes</th><th>suffix</th></tr><tr><td><span class="syntax-text">/dir/a.tar.gz</span></td><td><span class="syntax-text">a.tar.gz</span></td><td><span class="syntax-text">a</span></td><td><span class="syntax-text">.tar.gz</span></td><td><span class="syntax-text">.gz</span></td></tr><tr><td><span class="syntax-text">/dir/f.txt</span></td><td><span class="syntax-text">f.txt</span></td><td><span class="syntax-text">f</span></td><td><span class="syntax-text">.txt</span></td><td><span class="syntax-text">.txt</span></td></tr><tr><td><span class="syntax-text">/dir/f</span></td><td><span class="syntax-text">f</span></td><td><span class="syntax-text">f</span></td><td><span class="syntax-text"></span></td><td><span class="syntax-text"></span></td></tr><tr><td><span class="syntax-text">/dir/f.</span></td><td><span class="syntax-text">f.</span></td><td><span class="syntax-text">f</span></td><td><span class="syntax-text">.</span></td><td><span class="syntax-text">.</span></td></tr><tr><td><span class="syntax-text">/dir/.x.y</span></td><td><span class="syntax-text">.x.y</span></td><td><span class="syntax-text"></span></td><td><span class="syntax-text">.x.y</span></td><td><span class="syntax-text">.y</span></td></tr></table></section></section><section><header><h1>Notes</h1></header><section><header><h2>Operator precedence</h2></header><ol><li>!</li><li>&amp;&amp;</li><li>||</li></ol></section><section><header><h2>Evaluation</h2></header><dl><dt>||, &amp;&amp;</dt><dd><p>Operands are evaluated lazily, from left to right.</p></dd></dl></section><section><header><h2>Syntax</h2></header><p>Operators and parentheses must be separated by whitespace.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.STRING-MATCHER">Syntax element "STRING-MATCHER"</a></li><li><a href="#entity.syntax.FILES-MATCHER">Syntax element "FILES-MATCHER"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li><li><a href="#entity.syntax.GLOB-PATTERN">Syntax element "GLOB-PATTERN"</a></li><li><a href="#entity.syntax.REGEX">Syntax element "REGEX"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.FILES-CONDITION"><header><h1><span class="syntax-text">FILES-CONDITION</span></h1><p>A condition of existence of a set of named files</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">CONSTANT</span></dt><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>Reference to a symbol, that must have been defined as a files-condition.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>Reference to a symbol, that must have been defined as a files-condition.</p><p>An unquoted string that is not the name of a files-condition is interpreted as the name of a symbol.</p></dd><dt><span class="syntax-text">( FILES-CONDITION )</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">CONSTANT</span></dt><dd><p>A sequence of file names. Each together with an optional FILE-MATCHER.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">{ FILE-CONDITION... }</span></dt><dd><p>There can be only one FILE-CONDITION per line.</p><p>All parts must be separated by whitespace.</p></dd></dl></dd><dt><span class="syntax-text">FILE-CONDITION</span></dt><dd><p>A condition of existence of a file with a given name.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">FILE-NAME</span></dt><dt><span class="syntax-text">FILE-NAME : FILE-MATCHER</span></dt><dd><p>A condition that includes matching of the named file by FILE-MATCHER.</p><p>If there are multiple FILE-MATCHERs associated with a single file name (via multiple FILE-CONDITIONs), then the matchers are combined using &amp;&amp;, in order of appearance.</p><p>The ":" before FILE-MATCHER must appear on the same line as the file name.</p><p>All parts must be separated by whitespace.</p></dd></dl></dd><dt><span class="syntax-text">FILE-NAME</span></dt><dd><p>A FILE-NAME is a STRING.</p><p>The file name must be a relative path, using Posix syntax.</p></dd></dl><section><header><h1>Notes</h1></header><section><header><h2>Syntax</h2></header><p>Parentheses must be separated by whitespace.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.FILE-MATCHER">Syntax element "FILE-MATCHER"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.FILES-MATCHER"><header><h1><span class="syntax-text">FILES-MATCHER</span></h1><p>Matches a set of files (e.g. the contents of a directory).</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">empty</span></dt><dd><p>Matches iff the set of files is empty.</p></dd><dt><span class="syntax-text">matches [-full] FILES-CONDITION</span></dt><dd><p>Matches iff the set of files contains every file in FILES-CONDITION.</p><p>If -full is given, the set of files must contain no other files than those in FILES-CONDITION.</p></dd><dt><span class="syntax-text">every file : FILE-MATCHER</span></dt><dd><p>Matches iff every file satisfies FILE-MATCHER.</p><p>Note: FILE-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">any file : FILE-MATCHER</span></dt><dd><p>Matches iff any file satisfies FILE-MATCHER.</p><p>Note: FILE-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">num-files INTEGER-MATCHER</span></dt><dd><p>Matches iff the number of files satisfies INTEGER-MATCHER.</p><p>Note: INTEGER-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">-selection FILE-MATCHER FILES-MATCHER</span></dt><dd><p>Applies FILES-MATCHER to the sub set of files matched by FILE-MATCHER.</p><p>Note: If combined with -with-pruned - pruning is done before -selection, regardless of their mutual order.</p><p>Note: FILE-MATCHER and FILES-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">-with-pruned FILE-MATCHER FILES-MATCHER</span></dt><dd><p>Excludes contents of directories matched by FILE-MATCHER.</p><p>Symbolic links are followed.</p><p>Note: FILE-MATCHER is only applied to directories (and symbolic links to directories).</p><p>Note: FILE-MATCHER and FILES-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">constant (false|true)</span></dt><dd><p>Unconditionally false or true.</p></dd><dt><span class="syntax-text">! FILES-MATCHER</span></dt><dd><p>Matches sets of files not matched by the given matcher.</p></dd><dt><span class="syntax-text">FILES-MATCHER || FILES-MATCHER</span></dt><dd><p>Matches sets of files matched by any matcher.</p></dd><dt><span class="syntax-text">FILES-MATCHER &amp;&amp; FILES-MATCHER</span></dt><dd><p>Matches sets of files matched by every matcher.</p></dd><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>Reference to a symbol, that must have been defined as a files-matcher.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>Reference to a symbol, that must have been defined as a files-matcher.</p><p>An unquoted string that is not the name of a files-matcher is interpreted as the name of a symbol.</p></dd><dt><span class="syntax-text">( FILES-MATCHER )</span></dt></dl><section><header><h1>Notes</h1></header><section><header><h2>Operator precedence</h2></header><ol><li>!</li><li>&amp;&amp;</li><li>||</li></ol></section><section><header><h2>Evaluation</h2></header><dl><dt>||, &amp;&amp;</dt><dd><p>Operands are evaluated lazily, from left to right.</p></dd></dl></section><section><header><h2>Syntax</h2></header><p>Operators and parentheses must be separated by whitespace.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.FILES-CONDITION">Syntax element "FILES-CONDITION"</a></li><li><a href="#entity.syntax.INTEGER-MATCHER">Syntax element "INTEGER-MATCHER"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.INTEGER-MATCHER"><header><h1><span class="syntax-text">INTEGER-MATCHER</span></h1><p>Matches an integer.</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">== INTEGER</span></dt><dd><p>Matches integers equal to INTEGER.</p></dd><dt><span class="syntax-text">!= INTEGER</span></dt><dd><p>Matches integers not equal to INTEGER.</p></dd><dt><span class="syntax-text">&lt; INTEGER</span></dt><dd><p>Matches integers less than INTEGER.</p></dd><dt><span class="syntax-text">&lt;= INTEGER</span></dt><dd><p>Matches integers less than or equal to INTEGER.</p></dd><dt><span class="syntax-text">&gt; INTEGER</span></dt><dd><p>Matches integers greater than INTEGER.</p></dd><dt><span class="syntax-text">&gt;= INTEGER</span></dt><dd><p>Matches integers greater than or equal to INTEGER.</p></dd><dt><span class="syntax-text">constant (false|true)</span></dt><dd><p>Unconditionally false or true.</p></dd><dt><span class="syntax-text">! INTEGER-MATCHER</span></dt><dd><p>Matches integers not matched by the given matcher.</p></dd><dt><span class="syntax-text">INTEGER-MATCHER || INTEGER-MATCHER</span></dt><dd><p>Matches integers matched by any matcher.</p></dd><dt><span class="syntax-text">INTEGER-MATCHER &amp;&amp; INTEGER-MATCHER</span></dt><dd><p>Matches integers matched by every matcher.</p></dd><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>Reference to a symbol, that must have been defined as an integer-matcher.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>Reference to a symbol, that must have been defined as an integer-matcher.</p><p>An unquoted string that is not the name of an integer-matcher is interpreted as the name of a symbol.</p></dd><dt><span class="syntax-text">( INTEGER-MATCHER )</span></dt></dl><section><header><h1>Notes</h1></header><section><header><h2>Operator precedence</h2></header><ol><li>!</li><li>&amp;&amp;</li><li>||</li></ol></section><section><header><h2>Evaluation</h2></header><dl><dt>||, &amp;&amp;</dt><dd><p>Operands are evaluated lazily, from left to right.</p></dd></dl></section><section><header><h2>Syntax</h2></header><p>Operators and parentheses must be separated by whitespace.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.INTEGER">Syntax element "INTEGER"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.LINE-MATCHER"><header><h1><span class="syntax-text">LINE-MATCHER</span></h1><p>Matches individual text lines of a string.</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">contents STRING-MATCHER</span></dt><dd><p>Matches lines who's text contents matches STRING-MATCHER.</p></dd><dt><span class="syntax-text">line-num INTEGER-MATCHER</span></dt><dd><p>Matches lines who's line number matches INTEGER-MATCHER.</p><p>Note: Line numbers start at 1.</p><p>Note: INTEGER-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">constant (false|true)</span></dt><dd><p>Unconditionally false or true.</p></dd><dt><span class="syntax-text">! LINE-MATCHER</span></dt><dd><p>Matches lines not matched by the given matcher.</p></dd><dt><span class="syntax-text">LINE-MATCHER || LINE-MATCHER</span></dt><dd><p>Matches lines matched by any matcher.</p></dd><dt><span class="syntax-text">LINE-MATCHER &amp;&amp; LINE-MATCHER</span></dt><dd><p>Matches lines matched by every matcher.</p></dd><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>Reference to a symbol, that must have been defined as a line-matcher.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>Reference to a symbol, that must have been defined as a line-matcher.</p><p>An unquoted string that is not the name of a line-matcher is interpreted as the name of a symbol.</p></dd><dt><span class="syntax-text">( LINE-MATCHER )</span></dt></dl><section><header><h1>Notes</h1></header><section><header><h2>Operator precedence</h2></header><ol><li>!</li><li>&amp;&amp;</li><li>||</li></ol></section><section><header><h2>Evaluation</h2></header><dl><dt>||, &amp;&amp;</dt><dd><p>Operands are evaluated lazily, from left to right.</p></dd></dl></section><section><header><h2>Syntax</h2></header><p>Operators and parentheses must be separated by whitespace.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.STRING-MATCHER">Syntax element "STRING-MATCHER"</a></li><li><a href="#entity.syntax.INTEGER-MATCHER">Syntax element "INTEGER-MATCHER"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.PROGRAM"><header><h1><span class="syntax-text">PROGRAM</span></h1><p>An external program, with optional arguments, and optional transformation of the output.</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">PROGRAM'</span></dt><dt><span class="syntax-text">( PROGRAM' )</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PROGRAM'</span></dt><dd><dl><dt><span class="syntax-text">PGM-AND-ARGS [STDIN] [TRANSFORMATION-OF-OUTPUT]</span></dt></dl></dd><dt><span class="syntax-text">PGM-AND-ARGS</span></dt><dd><p>A program followed by arguments until end of line.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">PGM-FOR-ARG-LIST [PROGRAM-ARGUMENT]...</span></dt><dd><p>A program with a list of arguments.</p></dd><dt><span class="syntax-text">$ SHELL-COMMAND-LINE</span></dt><dd><p>A shell command.</p><p>SHELL-COMMAND-LINE is the remaining part of the current line.<br>It is passed as a single string to the operating system's shell.</p></dd></dl></dd><dt><span class="syntax-text">PGM-FOR-ARG-LIST</span></dt><dd><p>An executable program.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">PATH</span></dt><dd><p>The PATH of an executable file.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table><p>Note: The relativities are different for the "command line" "actor".</p></dd><dt><span class="syntax-text">% STRING</span></dt><dd><p>A program installed on the current system - a program in the OS PATH.</p></dd><dt><span class="syntax-text">@ SYMBOL-NAME</span></dt><dd><p>Reference to a program that has been defined using the def instruction.</p><p>SYMBOL-NAME must have been defined as a "program".</p><p>Arguments and transformations are appended to existing arguments and transformations of SYMBOL-NAME.</p></dd><dt><span class="syntax-text">-python</span></dt><dd><p>The Python interpreter (Python &gt;= 3.5.4).</p><p>Since Exactly is written in Python, the Python interpreter is guaranteed to be available on the system.</p></dd></dl></dd><dt><span class="syntax-text">STDIN</span></dt><dd><p>Supplies stdin to the program.</p><p>If the program is a reference to a PROGRAM symbol, this stdin is appended to the stdin defined for the referenced program.</p><p>Note: Must appear on a separate line.<br>If not, it will be interpreted as arguments.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">-stdin STRING-SOURCE</span></dt></dl></dd><dt><span class="syntax-text">TRANSFORMATION-OF-OUTPUT</span></dt><dd><p>Transforms the output from the program.</p><p>Depending on the context, either stdout or stderr is transformed.</p><p>Note: Must appear on a separate line.<br>If not, it will be interpreted as arguments.</p><p>Note: STRING-TRANSFORMER may not contain infix operators (unless inside parenthesis).</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">-transformed-by STRING-TRANSFORMER</span></dt></dl></dd></dl><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT">Syntax element "PROGRAM-ARGUMENT"</a></li><li><a href="#entity.syntax.STRING-TRANSFORMER">Syntax element "STRING-TRANSFORMER"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.LIST">Syntax element "LIST"</a></li><li><a href="#entity.syntax.SHELL-COMMAND-LINE">Syntax element "SHELL-COMMAND-LINE"</a></li><li><a href="#entity.syntax.STRING-SOURCE">Syntax element "STRING-SOURCE"</a></li><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.type.program">Type "program"</a></li><li><a href="#test-case.instruction.setup.def">Instruction "def" (in phase [setup])</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.STRING-MATCHER"><header><h1><span class="syntax-text">STRING-MATCHER</span></h1><p>Matches a string (a sequence of new-line separated text lines).</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">empty</span></dt><dd><p>Matches iff the string is empty.</p></dd><dt><span class="syntax-text">equals (STRING|HERE-DOCUMENT|-file PATH-OF-EXPECTED)</span></dt><dd><p>Matches iff the string is equal to a given string, HERE-DOCUMENT or contents of a file.</p><p>Any SYMBOL-REFERENCE appearing in the file PATH-OF-EXPECTED is NOT substituted.</p></dd><dt><span class="syntax-text">matches [-full] REGEX</span></dt><dd><p>Matches iff REGEX matches any part of the string.</p><p>If -full is given, then REGEX must match the full string.</p></dd><dt><span class="syntax-text">every line : LINE-MATCHER</span></dt><dd><p>Matches iff every line satisfies LINE-MATCHER.</p><p>Note: LINE-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">any line : LINE-MATCHER</span></dt><dd><p>Matches iff any line satisfies LINE-MATCHER.</p><p>Note: LINE-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">num-lines INTEGER-MATCHER</span></dt><dd><p>Matches iff the number of lines of the string matches INTEGER-MATCHER.</p><p>Note: INTEGER-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">run PROGRAM</span></dt><dd><p>Runs a program, and matches iff its exit code is 0.</p><p>The string to match is given as stdin.<br>If PROGRAM defines stdin, then the string to match is appended to that stdin.</p><p>Transformations of the output from PROGRAM are ignored.</p></dd><dt><span class="syntax-text">-transformed-by STRING-TRANSFORMER STRING-MATCHER</span></dt><dd><p>Applies STRING-MATCHER to the string transformed by STRING-TRANSFORMER.</p><p>Note: STRING-TRANSFORMER and STRING-MATCHER may not contain infix operators (unless inside parenthesis).</p></dd><dt><span class="syntax-text">constant (false|true)</span></dt><dd><p>Unconditionally false or true.</p></dd><dt><span class="syntax-text">! STRING-MATCHER</span></dt><dd><p>Matches strings not matched by the given matcher.</p></dd><dt><span class="syntax-text">STRING-MATCHER || STRING-MATCHER</span></dt><dd><p>Matches strings matched by any matcher.</p></dd><dt><span class="syntax-text">STRING-MATCHER &amp;&amp; STRING-MATCHER</span></dt><dd><p>Matches strings matched by every matcher.</p></dd><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>Reference to a symbol, that must have been defined as a string-matcher.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>Reference to a symbol, that must have been defined as a string-matcher.</p><p>An unquoted string that is not the name of a string-matcher is interpreted as the name of a symbol.</p></dd><dt><span class="syntax-text">( STRING-MATCHER )</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH-OF-EXPECTED</span></dt><dd><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl><section><header><h1>Notes</h1></header><section><header><h2>Operator precedence</h2></header><ol><li>!</li><li>&amp;&amp;</li><li>||</li></ol></section><section><header><h2>Evaluation</h2></header><dl><dt>||, &amp;&amp;</dt><dd><p>Operands are evaluated lazily, from left to right.</p></dd></dl></section><section><header><h2>Syntax</h2></header><p>Operators and parentheses must be separated by whitespace.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.HERE-DOCUMENT">Syntax element "HERE-DOCUMENT"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.REGEX">Syntax element "REGEX"</a></li><li><a href="#entity.syntax.INTEGER-MATCHER">Syntax element "INTEGER-MATCHER"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li><li><a href="#entity.syntax.STRING-TRANSFORMER">Syntax element "STRING-TRANSFORMER"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.STRING-TRANSFORMER"><header><h1><span class="syntax-text">STRING-TRANSFORMER</span></h1><p>Transforms a string (a sequence of new-line separated text lines).</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">filter MATCHER</span></dt><dd><p>Keeps lines matched by MATCHER, and discards lines not matched.</p><p>MATCHER is one of:</p><dl><dt><span class="syntax-text">LINE-MATCHER</span></dt><dd><p>Applies a LINE-MATCHER.</p></dd><dt><span class="syntax-text">-line-nums LINE-NUMBER-RANGE...</span></dt><dd><p>A line matches iff it's line number matches any LINE-NUMBER-RANGE.</p></dd></dl></dd><dt><span class="syntax-text">replace [-preserve-new-lines] REGEX STRING</span></dt><dd><p>Replaces every string matching REGEX (on a single line) with STRING.</p><p>Backslash escapes in STRING are processed. That is, \n is converted to a single newline character, \r is converted to a carriage return, and so forth.</p><p>Unknown escapes such as \&amp; are left alone.</p><p>Back-references, such as \6, are replaced with the substring matched by group 6 in REGEX.</p><p>Every line ends with "\n", except the last line, which may or may not end with "\n".<br>If -preserve-new-lines is given, this "\n" is excluded from the replacement.</p><p>Note: Lines are separated by "\n", regardless of the current OS.</p></dd><dt><span class="syntax-text">char-case (-to-lower|-to-upper)</span></dt><dd><dl><dt><span class="syntax-text">-to-lower</span></dt><dd><p>Converts all cased characters to lowercase.</p></dd><dt><span class="syntax-text">-to-upper</span></dt><dd><p>Converts all cased characters to uppercase.</p></dd></dl></dd><dt><span class="syntax-text">strip [-trailing-space|-trailing-new-lines]</span></dt><dd><p>Removes all whitespace at the beginning and end of the string (by default).</p><dl><dt><span class="syntax-text">-trailing-space</span></dt><dd><p>Removes all whitespace at the end of the string.</p></dd><dt><span class="syntax-text">-trailing-new-lines</span></dt><dd><p>Removes every "\n" at the end of the string.</p><p>Note: Lines are separated by "\n", regardless of the current OS.</p></dd></dl></dd><dt><span class="syntax-text">run [-ignore-exit-code] PROGRAM</span></dt><dd><p>Runs a program, with input and output via stdin and stdout.</p><p>If PROGRAM defines stdin, then the string to transform is appended to that stdin.</p><p>The result is HARD_ERROR if the exit code is non-zero, unless -ignore-exit-code is given.</p></dd><dt><span class="syntax-text">replace-test-case-dirs</span></dt><dd><p>Replaces every occurrence of a string that equals the absolute path of a TCDS directory (on a single line) with the name of the corresponding builtin symbol.</p><p>Paths/symbols that are replaced:</p><ul><li><span class="syntax-text">EXACTLY_ACT</span></li><li><span class="syntax-text">EXACTLY_ACT_HOME</span></li><li><span class="syntax-text">EXACTLY_HOME</span></li><li><span class="syntax-text">EXACTLY_TMP</span></li></ul><p>If EXACTLY_HOME and EXACTLY_ACT_HOME are equal, then paths will be replaced with EXACTLY_HOME.</p></dd><dt><span class="syntax-text">identity</span></dt><dd><p>Gives output that is identical to the input.</p></dd><dt><span class="syntax-text">STRING-TRANSFORMER | STRING-TRANSFORMER</span></dt><dd><p>Composition of string-transformers.</p><p>The output of the string-transformer to the left is given as input to the string-transformer to the right.</p></dd><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>Reference to a symbol, that must have been defined as a string-transformer.</p></dd><dt><span class="syntax-text">SYMBOL-NAME</span></dt><dd><p>Reference to a symbol, that must have been defined as a string-transformer.</p><p>An unquoted string that is not the name of a string-transformer is interpreted as the name of a symbol.</p></dd><dt><span class="syntax-text">( STRING-TRANSFORMER )</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">LINE-NUMBER-RANGE</span></dt><dd><p>A consecutive sequence of line numbers.</p><p>Negative numbers denote line numbers relative to the end.<br>-1 is the last line number, -2 is the second to last line number, etc.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">INTEGER</span></dt><dd><p>The single line number INTEGER.</p></dd><dt><span class="syntax-text">:INTEGER</span></dt><dd><p>Line numbers from 1 to INTEGER (including).</p></dd><dt><span class="syntax-text">INTEGER:</span></dt><dd><p>Line numbers starting from INTEGER.</p></dd><dt><span class="syntax-text">INTEGER:INTEGER</span></dt><dd><p>Line numbers from INTEGER (to the left) to INTEGER (to the right) (including).</p></dd></dl><p>Note: Line numbers start at 1.</p><p>Note: INTEGER must not contain ":"</p></dd></dl><section><header><h1>Notes</h1></header><section><header><h2>Syntax</h2></header><p>Operators and parentheses must be separated by whitespace.</p></section></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.INTEGER">Syntax element "INTEGER"</a></li><li><a href="#entity.syntax.LINE-MATCHER">Syntax element "LINE-MATCHER"</a></li><li><a href="#entity.syntax.REGEX">Syntax element "REGEX"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li><li><a href="#entity.concept.test-case-directory-structure">Concept "test case directory structure"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article></section><section class="toc" id="custom.syntax.other"><header><h2>Other</h2></header><article class="entity syntax toc" id="entity.syntax.ACT-INTERPRETER"><header><h1><span class="syntax-text">ACT-INTERPRETER</span></h1><p>An interpreter program that executes source code of the "act" phase</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">PATH [PROGRAM-ARGUMENT]...</span></dt><dd><p>The PATH of an executable file.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr></table></dd><dt><span class="syntax-text">% STRING [PROGRAM-ARGUMENT]...</span></dt><dd><p>A program installed on the current system - a program in the OS PATH.</p></dd><dt><span class="syntax-text">-python [PROGRAM-ARGUMENT]...</span></dt><dd><p>The Python interpreter (Python &gt;= 3.5.4).</p><p>Since Exactly is written in Python, the Python interpreter is guaranteed to be available on the system.</p></dd></dl><section><header><h1>Description</h1></header><p>An external program that interprets a source code file, who's path is given as a command line argument.</p><p>When the program is applied, the path of the source code file is added as the last argument.</p><p>Referenced symbols must have been defined in the "setup" phase.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.PROGRAM-ARGUMENT">Syntax element "PROGRAM-ARGUMENT"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.GLOB-PATTERN"><header><h1><span class="syntax-text">GLOB-PATTERN</span></h1><p>A file name glob pattern</p></header><section><header><h1>Description</h1></header><p>Unix shell-style wildcards.</p><p>Patterns:</p><ul><li><span class="syntax-text">?</span><p>Matches any single character.</p></li><li><span class="syntax-text">*</span><p>Matches any number of any characters including none.</p></li><li><span class="syntax-text">[CHARACTERS]</span><p>Matches a single character that is listed in CHARACTERS.</p></li><li><span class="syntax-text">[CHARACTER-CHARACTER]</span><p>Matches a single character in the given range.</p></li><li><span class="syntax-text">[!CHARACTERS]</span><p>Matches a single character that is not listed in CHARACTERS.</p></li></ul><p>Directory specifications:</p><ul><li><span class="syntax-text">/</span><p>Directory separator.</p></li></ul><p>For a literal match, wrap the meta-characters in brackets. For example, '[?]' matches the character '?'.</p></section><section><header><h1>See also</h1></header><ul><li><a href="https://docs.python.org/3.5/library/fnmatch.html">Python file name matching</a></li><li><a href="https://en.wikipedia.org/wiki/Glob_(programming)#Unix">Glob patterns on Wikipedia</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.HERE-DOCUMENT"><header><h1><span class="syntax-text">HERE-DOCUMENT</span></h1><p>A string value, given as a sequence of lines, resembling shell "here document" syntax</p></header><section><header><h1>Description</h1></header><pre>&lt;&lt;EOF
first line
...
last line
EOF
</pre><p>Any single-word string may be used instead of "EOF" as marker. What matters is that the maker at start and end of input matches.</p><p>Any SYMBOL-REFERENCE appearing in the text is substituted.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.string">Type "string"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.INTEGER"><header><h1><span class="syntax-text">INTEGER</span></h1><p>An integer expression</p></header><section><header><h1>Description</h1></header><p>A STRING that is an expression that evaluates to an integer (using Python syntax).</p><p>May be quoted (to allow space).</p><p>Any SYMBOL-REFERENCE appearing in STRING is substituted.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.PROGRAM-ARGUMENT"><header><h1><span class="syntax-text">PROGRAM-ARGUMENT</span></h1><p>An individual string, or a list of strings, with additional features for text-until-end-of-line and references to existing files</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">STRING</span></dt><dt><span class="syntax-text">SYMBOL-REFERENCE</span></dt><dd><p>A reference to a symbol of type string, path or list.</p><p>A path symbol gives a single argument that is its absolute path.</p><p>A list symbol gives a list of arguments.</p><p>Note: To pass a list as a single argument, convert it to a string by surrounding it with soft quotes. The elements will be separated by a single space.</p></dd><dt><span class="syntax-text">:&gt; TEXT-UNTIL-END-OF-LINE</span></dt><dd><p>The remaining part of the current line becomes a single argument.</p><p>Any SYMBOL-REFERENCE appearing in TEXT-UNTIL-END-OF-LINE is substituted.</p></dd><dt><span class="syntax-text">-existing-file PATH-OF-EXISTING</span></dt><dd><p>A PATH, with additional check for existence.</p><p>Symbolic links are followed.</p><p>Gives a single argument of an absolute path.</p></dd><dt><span class="syntax-text">-existing-dir PATH-OF-EXISTING</span></dt><dd><p>A PATH, with additional check for existence.</p><p>Symbolic links are followed.</p><p>Gives a single argument of an absolute path.</p></dd><dt><span class="syntax-text">-existing-path PATH-OF-EXISTING</span></dt><dd><p>A PATH, with additional check for existence.</p><p>Symbolic links are followed.</p><p>Gives a single argument of an absolute path.</p></dd></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">PATH-OF-EXISTING</span></dt><dd><p>The PATH of an existing file.</p><p>Accepted relativities (default is "home directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table></dd></dl><section><header><h1>Description</h1></header><p>An individual argument, or a list of arguments, in case of an unquoted reference to a "list" symbol.</p><p>An argument list is an ordinary "list" value, with additional features for text-until-end-of-line and references to existing files.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.LIST">Syntax element "LIST"</a></li><li><a href="#entity.syntax.SYMBOL-REFERENCE">Syntax element "SYMBOL-REFERENCE"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.REGEX"><header><h1><span class="syntax-text">REGEX</span></h1><p>A regular expression, using Python syntax</p></header><dl><dt><span class="syntax-text">[-ignore-case] STRING</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">-ignore-case</span></dt><dd><p>Makes the matching ignore case.</p></dd></dl><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="https://docs.python.org/3/library/re.html#regular-expression-syntax">Python regular expressions</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.SHELL-COMMAND-LINE"><header><h1><span class="syntax-text">SHELL-COMMAND-LINE</span></h1><p>A shell command line, as the remaining part of the current line.</p></header><section><header><h1>Description</h1></header><p>A SHELL-COMMAND-LINE is passed as a single string to the operating system's shell, so all features of the shell can be used.</p><p>Us of the shell is of course not portable since it depends on the current operating system environment's shell.</p><p>On POSIX, the shell defaults to /bin/sh.<br>On Windows, the COMSPEC environment variable specifies the default shell.</p></section></article><article class="entity syntax toc" id="entity.syntax.STRING-SOURCE"><header><h1><span class="syntax-text">STRING-SOURCE</span></h1><p>A string, from various sources</p></header><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">STRING-SOURCE'</span></dt><dt><span class="syntax-text">( STRING-SOURCE' )</span></dt></dl><p><span class="header-text">where</span></p><dl><dt><span class="syntax-text">STRING-SOURCE'</span></dt><dd><dl><dt><span class="syntax-text">STRING</span></dt><dt><span class="syntax-text">HERE-DOCUMENT</span></dt><dt><span class="syntax-text">-file SOURCE-FILE-PATH [TRANSFORMATION]</span></dt><dd><p>The contents of an existing file.</p><p>Any SYMBOL-REFERENCE appearing in the file SOURCE-FILE-PATH is NOT substituted.</p></dd><dt><span class="syntax-text">(-stdout-from|-stderr-from) [-ignore-exit-code] PROGRAM</span></dt><dd><p>The output from a "program".</p><p>The result is HARD_ERROR if the exit code is non-zero, unless -ignore-exit-code is given.</p><p>Note: -ignore-exit-code do not apply to programs run by string-transformers applied via PROGRAM.</p><p>The program must terminate.</p></dd></dl></dd><dt><span class="syntax-text">SOURCE-FILE-PATH</span></dt><dd><p>The PATH of an existing regular file.</p><p>Accepted relativities (default is "current directory"):</p><table><tr><td><span class="syntax-text">-rel-home</span></td><td>home directory</td></tr><tr><td><span class="syntax-text">-rel-act-home</span></td><td>act-home directory</td></tr><tr><td><span class="syntax-text">-rel-act</span></td><td>act directory</td></tr><tr><td><span class="syntax-text">-rel-tmp</span></td><td>tmp directory</td></tr><tr><td><span class="syntax-text">-rel-result</span></td><td>result directory</td></tr><tr><td><span class="syntax-text">-rel-cd</span></td><td>current directory</td></tr></table><p>Note: -rel-result is only available in phases after [act].</p></dd><dt><span class="syntax-text">TRANSFORMATION</span></dt><dd><p>Transforms the original contents.</p><p><span class="header-text">Forms:</span></p><dl><dt><span class="syntax-text">-transformed-by STRING-TRANSFORMER</span></dt></dl><p>Note: STRING-TRANSFORMER may not contain infix operators (unless inside parenthesis).</p></dd></dl><section><header><h1>See also</h1></header><ul><li><a href="#entity.syntax.PATH">Syntax element "PATH"</a></li><li><a href="#entity.syntax.STRING">Syntax element "STRING"</a></li><li><a href="#entity.syntax.HERE-DOCUMENT">Syntax element "HERE-DOCUMENT"</a></li><li><a href="#entity.syntax.STRING-TRANSFORMER">Syntax element "STRING-TRANSFORMER"</a></li><li><a href="#entity.syntax.PROGRAM">Syntax element "PROGRAM"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.SYMBOL-NAME"><header><h1><span class="syntax-text">SYMBOL-NAME</span></h1><p>The name of a symbol</p></header><section><header><h1>Description</h1></header><p>A combination of alphanumeric characters and underscores.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.symbol">Concept "symbol"</a></li></ul></section></article><article class="entity syntax toc" id="entity.syntax.SYMBOL-REFERENCE"><header><h1><span class="syntax-text">SYMBOL-REFERENCE</span></h1><p>A reference to a symbol using special reference syntax</p></header><dl><dt><span class="syntax-text">@[SYMBOL-NAME]@</span></dt></dl><section><header><h1>See also</h1></header><ul><li><a href="#entity.concept.symbol">Concept "symbol"</a></li><li><a href="#entity.syntax.SYMBOL-NAME">Syntax element "SYMBOL-NAME"</a></li></ul></section></article></section></section><section class="toc" id="custom.builtin"><header><h1>Builtin symbols</h1></header><section class="toc" id="custom.builtin.valuetype.string"><header><h2>String symbols</h2></header><article class="builtin entity toc" id="entity.builtin.NEW_LINE"><header><h1><span class="syntax-text">NEW_LINE</span></h1><p>The new-line character ("\n"), the line separator of strings handled by Exactly</p></header><p>Type: string</p><section><header><h1>DESCRIPTION</h1></header><p>Exactly separates lines by "\n", regardless of the current OS.</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.string">Type "string"</a></li></ul></section></article><article class="builtin entity toc" id="entity.builtin.OS_LINE_SEP"><header><h1><span class="syntax-text">OS_LINE_SEP</span></h1><p>The string that separates text lines on the current OS ("\n", "\r\n", e.g.).</p></header><p>Type: string</p><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.string">Type "string"</a></li></ul></section></article><article class="builtin entity toc" id="entity.builtin.TAB"><header><h1><span class="syntax-text">TAB</span></h1><p>The tab character.</p></header><p>Type: string</p><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.string">Type "string"</a></li></ul></section></article></section><section class="toc" id="custom.builtin.valuetype.path"><header><h2>Path symbols</h2></header><article class="builtin entity toc" id="entity.builtin.EXACTLY_ACT"><header><h1><span class="syntax-text">EXACTLY_ACT</span></h1><p>The absolute path of the act/ sub directory of the "sandbox directory structure".
</p></header><p>Type: path</p><section><header><h1>DESCRIPTION</h1></header><p>This is the root directory of paths specified with "-rel-act".</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.path">Type "path"</a></li></ul></section></article><article class="builtin entity toc" id="entity.builtin.EXACTLY_ACT_HOME"><header><h1><span class="syntax-text">EXACTLY_ACT_HOME</span></h1><p>The absolute path of the directory that corresponds to the "act-home" configuration parameter.
</p></header><p>Type: path</p><section><header><h1>DESCRIPTION</h1></header><p>This is the root directory of paths specified with "-rel-act-home".</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.path">Type "path"</a></li></ul></section></article><article class="builtin entity toc" id="entity.builtin.EXACTLY_HOME"><header><h1><span class="syntax-text">EXACTLY_HOME</span></h1><p>The absolute path of the directory that corresponds to the "home" configuration parameter.
</p></header><p>Type: path</p><section><header><h1>DESCRIPTION</h1></header><p>This is the root directory of paths specified with "-rel-home".</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.path">Type "path"</a></li></ul></section></article><article class="builtin entity toc" id="entity.builtin.EXACTLY_RESULT"><header><h1><span class="syntax-text">EXACTLY_RESULT</span></h1><p>The absolute path of the result/ sub directory of the "sandbox directory structure".
</p></header><p>Type: path</p><section><header><h1>DESCRIPTION</h1></header><p>This is the root directory of paths specified with "-rel-result".</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.path">Type "path"</a></li></ul></section></article><article class="builtin entity toc" id="entity.builtin.EXACTLY_TMP"><header><h1><span class="syntax-text">EXACTLY_TMP</span></h1><p>The absolute path of the tmp/ sub directory of the "sandbox directory structure".
</p></header><p>Type: path</p><section><header><h1>DESCRIPTION</h1></header><p>This is the root directory of paths specified with "-rel-tmp".</p></section><section><header><h1>See also</h1></header><ul><li><a href="#entity.type.path">Type "path"</a></li></ul></section></article></section></section><section class="toc" id="custom.cli-syntax"><header><h1>Command line syntax</h1></header><section class="toc" id="help-part.TEST_CASE_CLI"><header><h2>Test Cases</h2></header><p>Runs a test case</p><section><header><h3>SYNOPSIS</h3></header><dl><dt><span class="syntax-text">exactly [OPTION]... FILE</span></dt></dl></section><section><header><h3>DESCRIPTION</h3></header><p>Runs the test case in file FILE.</p></section><section><header><h3>OPTIONS</h3></header><dl><dt><span class="syntax-text">--actor COMMAND-LINE</span></dt><dd><p>Specifies the "source interpreter" actor, by giving the program that serves as the interpreter.</p><p>COMMAND-LINE is a command line (with optional arguments), using Unix shell syntax.</p><p>Note that an actor specified in the test case has precedence over the actor given here.</p><p>See also</p><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li><li><a href="#entity.concept.shell-syntax">Concept "shell syntax"</a></li></ul></dd><dt><span class="syntax-text">-k, --keep</span></dt><dd><p>Runs the test case as normal, but the "sandbox directory structure" is preserved, and its root directory is the only output on stdout.<br>If execution of the test case cannot be started (due to invalid syntax, e.g.), then nothing is output on stdout.</p><p>See also</p><ul><li><a href="#entity.concept.sandbox-directory-structure">Concept "sandbox directory structure"</a></li></ul></dd><dt><span class="syntax-text">--act</span></dt><dd><p>[before-assert] and [assert] are skipped; and instead of "reporting" the result, the outcome of [act] is emitted:</p><p>output on stdout/stderr from [act] becomes the output on stdout/stderr;<br>the exit code from [act] becomes the exit code from the program.</p><p>If an error occurs, the normal error information is emitted to stderr (following the output from [act]).</p></dd><dt><span class="syntax-text">--preprocessor COMMAND-LINE</span></dt><dd><p>A command line that transforms a test case file as the first step of processing it.</p><p>COMMAND-LINE is a command line (with optional arguments), using Unix shell syntax.</p><p>See also</p><ul><li><a href="#entity.concept.preprocessor">Concept "preprocessor"</a></li><li><a href="#test-suite.instruction.conf.preprocessor">Suite instruction "preprocessor" (in section [conf])</a></li><li><a href="#entity.concept.shell-syntax">Concept "shell syntax"</a></li></ul></dd><dt><span class="syntax-text">--suite FILE</span></dt><dd><p>Runs the test case as if it were part of the given suite.</p><p>This overrides the default suite file "exactly.suite".</p></dd></dl></section><section><header><h3>FILES</h3></header><p>If there exists a file "exactly.suite" in the same directory as FILE, then this file must be a test suite, and the test case is run as part of this suite.</p></section><section><header><h3>OUTCOME</h3></header><p>Outcome is reported either as an exit code, or as an exit code together with an exit identifier printed as a single line on stdout.</p><p>See test case specification for details.</p><p>Invalid command line arguments: Exit with exit code 64.</p><section><header><h4>Summary of exit codes and identifiers</h4></header><table><tr><th>Exit identifier</th><th>Exit code</th></tr><tr><td><span class="syntax-text">FAIL</span></td><td>32</td></tr><tr><td><span class="syntax-text">FILE_ACCESS_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">HARD_ERROR</span></td><td>128</td></tr><tr><td><span class="syntax-text">INTERNAL_ERROR</span></td><td>129</td></tr><tr><td><span class="syntax-text">PASS</span></td><td>0</td></tr><tr><td><span class="syntax-text">PRE_PROCESS_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">SKIPPED</span></td><td>0</td></tr><tr><td><span class="syntax-text">SYNTAX_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">VALIDATION_ERROR</span></td><td>65</td></tr><tr><td><span class="syntax-text">XFAIL</span></td><td>33</td></tr><tr><td><span class="syntax-text">XPASS</span></td><td>33</td></tr></table></section></section></section><section class="toc" id="help-part.TEST_SUITE_CLI"><header><h2>Test Suites</h2></header><p>Runs a test suite</p><section><header><h3>SYNOPSIS</h3></header><dl><dt><span class="syntax-text">exactly suite [--reporter REPORTER] [--actor COMMAND-LINE] FILE</span></dt></dl></section><section><header><h3>DESCRIPTION</h3></header><p>Runs the test suite in file FILE.</p></section><section><header><h3>OPTIONS</h3></header><dl><dt><span class="syntax-text">--actor COMMAND-LINE</span></dt><dd><p>Specifies a default "source interpreter" "actor" to use for every test case in the suite.</p><p>COMMAND-LINE is a command line (with optional arguments), using Unix shell syntax.</p><p>Note: An "actor" specified in the test suite or individual test cases will have precedence over the "actor" specified by this option.</p><p>See also</p><ul><li><a href="#entity.concept.actor">Concept "actor"</a></li><li><a href="#entity.concept.shell-syntax">Concept "shell syntax"</a></li><li><a href="#test-case.instruction.conf.actor">Instruction "actor" (in phase [conf])</a></li></ul></dd><dt><span class="syntax-text">--reporter REPORTER</span></dt><dd><p>Specifies in which format to report the execution of the test suite (stdout, stderr, exit code).</p><p>Options: "progress","junit" (default "progress").</p><p>See also</p><ul><li><a href="#entity.concept.suite-reporter">Concept "suite reporter"</a></li><li><a href="#entity.reporter.progress">Suite reporter "progress"</a></li><li><a href="#entity.reporter.junit">Suite reporter "junit"</a></li></ul></dd></dl></section><section><header><h3>FILES</h3></header><p>If FILE is a directory that contains a file "exactly.suite", then this file becomes the suite file argument.</p></section><section><header><h3>OUTCOME</h3></header><section><header><h4>Reporting</h4></header><p>Outcome is reported via an exit code and stdout.<br>stderr may contain helpful information.</p><p>Output on stdout is handled by the selected "suite reporter".<br>The "suite reporter" also handles the exit code, in some scenarios.</p><section><header><h5>See also</h5></header><ul><li><a href="#entity.concept.suite-reporter">Concept "suite reporter"</a></li></ul></section></section><section><header><h4>Scenarios</h4></header><ul><li>Invalid command line arguments<p>Invalid argument or an argument that denotes a non-existing file.</p><table><tr><th>Exit code</th><td>64</td></tr><tr><th>stdout</th><td>empty</td></tr></table></li><li>Invalid suite<p>Syntax error in a suite file, or a reference to a non-existing case or sub-suite file.</p><table><tr><th>Exit code</th><td>3</td></tr><tr><th>stdout</th><td>Depends on the selected "suite reporter"</td></tr></table></li><li>Complete execution<p>The suite has been executed.<br>Individual test cases may have failed, or may not be executable (due to syntax error, e.g.).</p><table><tr><th>Exit code</th><td>Depends on the selected "suite reporter"</td></tr><tr><th>stdout</th><td>Depends on the selected "suite reporter"</td></tr></table></li></ul></section></section></section><section class="toc" id="help-part.SYMBOL_CLI"><header><h2>Symbol Inspection</h2></header><p>Reports the usage of symbols in a test case or test suite</p><section><header><h3>SYNOPSIS</h3></header><dl><dt><span class="syntax-text">exactly symbol [TEST-CASE-OPTION]... FILE</span></dt><dt><span class="syntax-text">exactly symbol suite [TEST-SUITE-OPTION]... FILE</span></dt><dd><p>Reports all user defined symbols in the case/suite.</p><p>Each symbol is reported on a separate line, together with its type and the number of references to it.</p></dd><dt><span class="syntax-text">exactly symbol [TEST-CASE-OPTION]... FILE SYMBOL-NAME [--ref]</span></dt><dt><span class="syntax-text">exactly symbol suite [TEST-SUITE-OPTION]... FILE SYMBOL-NAME [--ref]</span></dt><dd><p>Reports information about a symbol.</p><p>If only SYMBOL-NAME is given, the definition of the symbol is reported.</p><p>If --ref is given, all references to the symbol are reported.</p></dd></dl></section><section><header><h3>OPTIONS</h3></header><dl><dt><span class="syntax-text">TEST-CASE-OPTION</span></dt><dd><p>Corresponds to the options for running a test case.</p></dd><dt><span class="syntax-text">TEST-SUITE-OPTION</span></dt><dd><p>Corresponds to the options for running a test suite.</p></dd></dl></section><section><header><h3>FILES</h3></header><ul><li>When reporting from a test case<p>If there exists a file "exactly.suite" in the same directory as FILE, then this file must be a test suite, and the test case is run as part of this suite.</p></li><li>When reporting from a test suite<p>If FILE is a directory that contains a file "exactly.suite", then this file becomes the suite file argument.</p></li></ul></section><section><header><h3>OUTCOME</h3></header><p>The report is printed on stdout.</p><p>Errors are reported with exit codes and exit identifiers corresponding to the outcome of running the corresponding test case or test suite. But the case/suite is not executed, so no execution errors occur.</p></section><section><header><h3>SEE ALSO</h3></header><ul><li><a href="#help-part.TEST_CASE_CLI">Test case CLI</a></li><li><a href="#help-part.TEST_SUITE_CLI">Test suite CLI</a></li></ul></section></section><section class="toc" id="custom.cli-syntax.help"><header><h2>Help System</h2></header><p>Exactlys help system.</p><p><span class="syntax-text">exactly help [ARGUMENT]...</span></p><section><header><h3>SYNOPSIS</h3></header><dl><dt><span class="syntax-text">help</span></dt><dd><p>Gives a brief description of the program.</p></dd><dt><span class="syntax-text">help help</span></dt><dd><p>Displays this help.</p></dd><dt><span class="syntax-text">help htmldoc</span></dt><dd><p>Generates a HTML version of all help information available in the program.</p></dd><dt><span class="syntax-text">help case</span></dt><dd><p>Describes the test case command line syntax.</p></dd><dt><span class="syntax-text">help case spec</span></dt><dd><p>Specification of the test case functionality.</p></dd><dt><span class="syntax-text">help PHASE</span></dt><dd><p>Describes a test case phase.</p></dd><dt><span class="syntax-text">help PHASE instructions</span></dt><dd><p>Lists instructions in PHASE.</p></dd><dt><span class="syntax-text">help PHASE INSTRUCTION</span></dt><dd><p>Describes an instruction in a test case phase.</p></dd><dt><span class="syntax-text">help instructions</span></dt><dd><p>Lists instructions per test case phase.</p></dd><dt><span class="syntax-text">help INSTRUCTION</span></dt><dd><p>Describes all test case instructions with the given name.</p></dd><dt><span class="syntax-text">help suite</span></dt><dd><p>Describes the test suite command line syntax.</p></dd><dt><span class="syntax-text">help suite spec</span></dt><dd><p>Specification of the test suite functionality.</p></dd><dt><span class="syntax-text">help suite SECTION</span></dt><dd><p>Describes a test suite section.</p></dd><dt><span class="syntax-text">help suite SECTION INSTRUCTION</span></dt><dd><p>Describes an instruction in a test suite section.</p></dd><dt><span class="syntax-text">help symbol</span></dt><dd><p>Describes the symbol usages report command line syntax.</p></dd><dt><span class="syntax-text">help ENTITY-TYPE [ENTITY-NAME]</span></dt><dd><p>Lists all entities of a type; or describes a given entity.</p><table><tr><td><span class="syntax-text">concept</span></td><td>Concepts</td></tr><tr><td><span class="syntax-text">directive</span></td><td>Directives</td></tr><tr><td><span class="syntax-text">confparam</span></td><td>Configuration parameters</td></tr><tr><td><span class="syntax-text">actor</span></td><td>Actors</td></tr><tr><td><span class="syntax-text">type</span></td><td>Types</td></tr><tr><td><span class="syntax-text">syntax</span></td><td>Syntax elements</td></tr><tr><td><span class="syntax-text">builtin</span></td><td>Builtin symbols</td></tr><tr><td><span class="syntax-text">reporter</span></td><td>Suite reporters</td></tr></table></dd></dl></section></section></section></body></html>